2025-05-24 14:10:51,090 - VisualChainApp - INFO - main_orchestrator.main:142 - --- Starting Visual Chain Generation (Verification: DeepFace Multi-Model) ---
2025-05-24 14:10:51,090 - VisualChainApp - INFO - main_orchestrator.main:143 - Person A: Winston Churchill
2025-05-24 14:10:51,090 - VisualChainApp - INFO - main_orchestrator.main:144 - Person B: James Charles
2025-05-24 14:10:51,090 - VisualChainApp - INFO - main_orchestrator.main:147 - --- Cleaning up previous output directories ---
2025-05-24 14:10:51,090 - VisualChainApp - INFO - main_orchestrator.clean_output_directory:75 - Directory to clean does not exist, skipping: output/connection_chain_images
2025-05-24 14:10:51,090 - VisualChainApp - INFO - main_orchestrator.clean_output_directory:75 - Directory to clean does not exist, skipping: output/connection_chain_images_verified
2025-05-24 14:10:51,090 - VisualChainApp - INFO - main_orchestrator.clean_output_directory:81 - Cleaning contents of directory: output/temp_files
2025-05-24 14:10:51,090 - VisualChainApp - DEBUG - main_orchestrator.clean_output_directory:87 -   Deleted file/link: output/temp_files/sub_chain_attempt_Winston_Churchill_to_James_Charles_1.xml
2025-05-24 14:10:51,091 - VisualChainApp - DEBUG - main_orchestrator.clean_output_directory:87 -   Deleted file/link: output/temp_files/sub_chain_attempt_Queen_Elizabeth_II_to_James_Charles_1.xml
2025-05-24 14:10:51,091 - VisualChainApp - DEBUG - main_orchestrator.clean_output_directory:87 -   Deleted file/link: output/temp_files/sub_chain_attempt_King_Charles_III_to_James_Charles_1.xml
2025-05-24 14:10:51,091 - VisualChainApp - DEBUG - main_orchestrator.clean_output_directory:87 -   Deleted file/link: output/temp_files/sub_chain_attempt_King_Charles_III_to_James_Charles_2.xml
2025-05-24 14:10:51,091 - VisualChainApp - DEBUG - main_orchestrator.clean_output_directory:87 -   Deleted file/link: output/temp_files/initial_full_chain_attempt_1.xml
2025-05-24 14:10:51,091 - VisualChainApp - INFO - main_orchestrator.clean_output_directory:93 - Finished cleaning directory: output/temp_files
2025-05-24 14:10:51,091 - VisualChainApp - INFO - main_orchestrator.ensure_dir:47 - Created directory: output/connection_chain_images
2025-05-24 14:10:51,091 - VisualChainApp - INFO - main_orchestrator.ensure_dir:47 - Created directory: output/connection_chain_images_verified
2025-05-24 14:10:51,091 - VisualChainApp - DEBUG - main_orchestrator.load_prompt_template:96 - Attempting to load prompt template from: prompts/system_prompt.txt
2025-05-24 14:10:51,091 - VisualChainApp - INFO - main_orchestrator.load_prompt_template:100 - Prompt template loaded successfully from prompts/system_prompt.txt
2025-05-24 14:10:51,091 - VisualChainApp - DEBUG - main_orchestrator.load_prompt_template:96 - Attempting to load prompt template from: prompts/initial_user_input_template.xml
2025-05-24 14:10:51,091 - VisualChainApp - INFO - main_orchestrator.load_prompt_template:100 - Prompt template loaded successfully from prompts/initial_user_input_template.xml
2025-05-24 14:10:51,091 - VisualChainApp - DEBUG - main_orchestrator.load_prompt_template:96 - Attempting to load prompt template from: prompts/initial_chain_retry_user_input_template.xml
2025-05-24 14:10:51,091 - VisualChainApp - INFO - main_orchestrator.load_prompt_template:100 - Prompt template loaded successfully from prompts/initial_chain_retry_user_input_template.xml
2025-05-24 14:10:51,091 - VisualChainApp - DEBUG - main_orchestrator.load_prompt_template:96 - Attempting to load prompt template from: prompts/retry_user_input_template.xml
2025-05-24 14:10:51,091 - VisualChainApp - INFO - main_orchestrator.load_prompt_template:100 - Prompt template loaded successfully from prompts/retry_user_input_template.xml
2025-05-24 14:10:51,091 - VisualChainApp - DEBUG - main_orchestrator.load_prompt_template:96 - Attempting to load prompt template from: prompts/sub_chain_exclusion_instruction_template.txt
2025-05-24 14:10:51,092 - VisualChainApp - INFO - main_orchestrator.load_prompt_template:100 - Prompt template loaded successfully from prompts/sub_chain_exclusion_instruction_template.txt
2025-05-24 14:10:51,092 - VisualChainApp - INFO - main_orchestrator.main:173 - --- Step 1: Requesting Initial Full Connection Chain from Gemini ---
2025-05-24 14:10:51,092 - VisualChainApp - INFO - main_orchestrator.main:178 - Initial full chain generation attempt 1/2
2025-05-24 14:10:51,092 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain:110 - Requesting chain: Winston Churchill -> ... -> James Charles.
2025-05-24 14:10:51,092 - VisualChainApp - INFO - initial_gemini_query._load_gemini_task_header:13 - Gemini task header loaded from prompts/gemini_task_header.txt
2025-05-24 14:10:51,092 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:50 - Querying Gemini with pre-formatted user input for a chain.
2025-05-24 14:10:51,092 - VisualChainApp - DEBUG - initial_gemini_query.get_initial_chain_from_gemini_direct:73 - User input XML for Gemini (part of full prompt):
## Task Execution
Now, using the rules, input format, and output formats defined above, please process the following connection request to find a full chain:<connection_request>
  <person1>Winston Churchill</person1>
  <person2>James Charles</person2>
  <additional_instructions></additional_instructions> 
  <!-- This will be empty for the first call, or contain exclusion for sub-chain calls -->
</connection_request>
2025-05-24 14:10:51,092 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:74 - --- Sending to Gemini (initial_gemini_query.get_initial_chain_from_gemini_direct) ---
2025-05-24 14:10:56,508 - VisualChainApp - DEBUG - initial_gemini_query.clean_gemini_xml_response:26 - Raw AI output before cleaning (first 300 chars): ```xml
<connection_chain>
  <chain_summary>
    <total_links>2</total_links>
    <subjects_connected>Winston Churchill → Oprah Winfrey → James Charles</subjects_connected>
    <chain_type>Extended</chain_type>
    <intermediary_count>1</intermediary_count>
    <research_confidence>Medium</research_c
2025-05-24 14:10:56,509 - VisualChainApp - DEBUG - initial_gemini_query.clean_gemini_xml_response:46 - AI output after cleaning (first 300 chars): <connection_chain>
  <chain_summary>
    <total_links>2</total_links>
    <subjects_connected>Winston Churchill → Oprah Winfrey → James Charles</subjects_connected>
    <chain_type>Extended</chain_type>
    <intermediary_count>1</intermediary_count>
    <research_confidence>Medium</research_confiden
2025-05-24 14:10:56,510 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:92 - Gemini response parsed as XML (root tag: connection_chain).
2025-05-24 14:10:56,510 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:98 - Received response from Gemini.
2025-05-24 14:10:56,511 - VisualChainApp - INFO - main_orchestrator.main:206 - Initial full chain attempt 1 output saved to output/temp_files/initial_full_chain_attempt_1.xml
2025-05-24 14:10:56,511 - VisualChainApp - INFO - main_orchestrator.main:221 - Successfully parsed <connection_chain> on attempt 1.
2025-05-24 14:10:56,511 - VisualChainApp - INFO - main_orchestrator.main:256 - --- Processing Link 1/2 (Overall) ---
2025-05-24 14:10:56,511 - VisualChainApp - DEBUG - main_orchestrator.main:257 - Current link to process XML: <link id="1">
    <subjects>Winston Churchill → Oprah Winfrey</subjects>
    <evidence>While there's no direct documented meeting between Churchill and Oprah, Oprah has extensively covered historical figures and events in her show, including segments likely referencing Churchill.</evidence>
    <sou
2025-05-24 14:10:56,511 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:112 - Attempting to extract persons from subjects_text: 'Winston Churchill → Oprah Winfrey'
2025-05-24 14:10:56,511 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:128 - Extracted P1: 'Winston Churchill', P2: 'Oprah Winfrey'
2025-05-24 14:10:56,511 - VisualChainApp - INFO - main_orchestrator.main:269 -   Attempting segment: 'Winston Churchill' → 'Oprah Winfrey'
2025-05-24 14:10:56,512 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:22 - Preparing to download images. Target: 'Winston Churchill → Oprah Winfrey', Query: '"Winston Churchill" AND "Oprah Winfrey"', Num: 5, Reference: False
2025-05-24 14:10:56,513 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:43 - Created image download folder: output/connection_chain_images/Winston_Churchill_Oprah_Winfrey
2025-05-24 14:10:56,513 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:50 -   Saving up to 5 images to: output/connection_chain_images/Winston_Churchill_Oprah_Winfrey for query: '"Winston Churchill" AND "Oprah Winfrey"'
2025-05-24 14:10:56,514 - VisualChainApp - DEBUG - image_downloader.fetch_images_for_link:62 - Starting icrawler.crawl for: "Winston Churchill" AND "Oprah Winfrey" (max_num=5)
2025-05-24 14:11:01,537 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:70 -   Finished icrawler.crawl for 'Winston Churchill → Oprah Winfrey'.
2025-05-24 14:11:01,538 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:79 -   Found 5 image files in output/connection_chain_images/Winston_Churchill_Oprah_Winfrey after crawl attempt.
2025-05-24 14:11:01,538 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:363 - --- Verifying link segment: 'Winston Churchill' <-> 'Oprah Winfrey' (using DeepFace Multi-Model) ---
2025-05-24 14:11:01,538 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:386 -   Found 5 images in 'output/connection_chain_images/Winston_Churchill_Oprah_Winfrey'. Will check up to 3 with DeepFace Multi-Model.
2025-05-24 14:11:01,538 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:206 -   Verifying image: 000005.jpg for 'Winston Churchill' and 'Oprah Winfrey' using DeepFace (multiple models: ArcFace, VGG-Face, Facenet).
2025-05-24 14:11:01,538 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Winston Churchill (target count: 5)
2025-05-24 14:11:01,538 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Winston Churchill' in reference_faces/Winston_Churchill.
2025-05-24 14:11:01,538 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Winston Churchill'. Using top 5.
2025-05-24 14:11:01,539 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Oprah Winfrey (target count: 5)
2025-05-24 14:11:01,539 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Oprah Winfrey' in reference_faces/Oprah_Winfrey.
2025-05-24 14:11:01,539 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Oprah Winfrey'. Using top 5.
2025-05-24 14:11:01,539 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:224 -   DeepFace: Verifying P1 'Winston Churchill' using 5 reference image(s) across 3 model(s).
2025-05-24 14:11:01,539 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 1/3: 'ArcFace'
2025-05-24 14:11:01,539 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.68 for model 'ArcFace' with metric 'cosine'.
2025-05-24 14:11:01,539 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 1/5): 000005.jpg vs 000001.jpg
2025-05-24 14:11:07,682 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000001.jpg') (Dist: 0.9633, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:11:07,682 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 2/5): 000005.jpg vs 000002.jpg
2025-05-24 14:11:11,416 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000002.jpg') (Dist: 0.9127, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:11:11,417 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 3/5): 000005.jpg vs 000003.jpg
2025-05-24 14:11:14,792 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000003.jpg') (Dist: 0.9448, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:11:14,793 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 4/5): 000005.jpg vs 000004.jpg
2025-05-24 14:11:19,311 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000004.jpg') (Dist: 0.9099, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:11:19,312 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 5/5): 000005.jpg vs 000005.jpg
2025-05-24 14:11:23,537 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000005.jpg') (Dist: 0.9382, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:11:23,537 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'ArcFace': NOT VERIFIED
2025-05-24 14:11:23,537 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 2/3: 'VGG-Face'
2025-05-24 14:11:23,537 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.45 for model 'VGG-Face' with metric 'cosine'.
2025-05-24 14:11:23,537 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 1/5): 000005.jpg vs 000001.jpg
2025-05-24 14:11:28,585 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.8624, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:11:28,586 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 2/5): 000005.jpg vs 000002.jpg
2025-05-24 14:11:32,377 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.9035, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:11:32,377 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 3/5): 000005.jpg vs 000003.jpg
2025-05-24 14:11:35,870 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.9354, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:11:35,870 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 4/5): 000005.jpg vs 000004.jpg
2025-05-24 14:11:40,510 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.9222, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:11:40,510 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 5/5): 000005.jpg vs 000005.jpg
2025-05-24 14:11:44,704 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.7979, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:11:44,705 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:11:44,705 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 3/3: 'Facenet'
2025-05-24 14:11:44,705 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.4 for model 'Facenet' with metric 'cosine'.
2025-05-24 14:11:44,705 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 1/5): 000005.jpg vs 000001.jpg
2025-05-24 14:11:49,453 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000001.jpg') (Dist: 0.8305, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:11:49,453 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 2/5): 000005.jpg vs 000002.jpg
2025-05-24 14:11:53,049 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000002.jpg') (Dist: 0.8472, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:11:53,050 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 3/5): 000005.jpg vs 000003.jpg
2025-05-24 14:11:56,434 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000003.jpg') (Dist: 1.0457, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:11:56,434 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 4/5): 000005.jpg vs 000004.jpg
2025-05-24 14:12:01,073 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000004.jpg') (Dist: 0.8060, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:12:01,074 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 5/5): 000005.jpg vs 000005.jpg
2025-05-24 14:12:05,187 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000005.jpg') (Dist: 0.8365, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:12:05,187 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'Facenet': NOT VERIFIED
2025-05-24 14:12:05,187 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:280 -   DeepFace P1 'Winston Churchill' Voting: 0/3 models voted YES. Final P1 Verified: False (Threshold: >50%)
2025-05-24 14:12:05,187 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:340 -   DeepFace: Skipping P2 'Oprah Winfrey' check as P1 'Winston Churchill' was not verified by vote.
2025-05-24 14:12:05,187 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:346 -   DeepFace Multi-Model Verification: One or both not verified by vote. P1_verified: False, P2_verified: False
2025-05-24 14:12:05,187 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:206 -   Verifying image: 000004.jpeg for 'Winston Churchill' and 'Oprah Winfrey' using DeepFace (multiple models: ArcFace, VGG-Face, Facenet).
2025-05-24 14:12:05,187 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Winston Churchill (target count: 5)
2025-05-24 14:12:05,187 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Winston Churchill' in reference_faces/Winston_Churchill.
2025-05-24 14:12:05,187 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Winston Churchill'. Using top 5.
2025-05-24 14:12:05,187 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Oprah Winfrey (target count: 5)
2025-05-24 14:12:05,187 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Oprah Winfrey' in reference_faces/Oprah_Winfrey.
2025-05-24 14:12:05,187 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Oprah Winfrey'. Using top 5.
2025-05-24 14:12:05,187 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:224 -   DeepFace: Verifying P1 'Winston Churchill' using 5 reference image(s) across 3 model(s).
2025-05-24 14:12:05,187 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 1/3: 'ArcFace'
2025-05-24 14:12:05,187 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.68 for model 'ArcFace' with metric 'cosine'.
2025-05-24 14:12:05,188 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 1/5): 000004.jpeg vs 000001.jpg
2025-05-24 14:12:08,316 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000001.jpg') (Dist: 1.0020, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:12:08,316 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 2/5): 000004.jpeg vs 000002.jpg
2025-05-24 14:12:11,637 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000002.jpg') (Dist: 0.9206, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:12:11,638 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 3/5): 000004.jpeg vs 000003.jpg
2025-05-24 14:12:14,749 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000003.jpg') (Dist: 0.8515, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:12:14,750 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 4/5): 000004.jpeg vs 000004.jpg
2025-05-24 14:12:19,164 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000004.jpg') (Dist: 0.9187, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:12:19,164 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 5/5): 000004.jpeg vs 000005.jpg
2025-05-24 14:12:23,032 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000005.jpg') (Dist: 0.9477, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:12:23,033 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'ArcFace': NOT VERIFIED
2025-05-24 14:12:23,033 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 2/3: 'VGG-Face'
2025-05-24 14:12:23,033 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.45 for model 'VGG-Face' with metric 'cosine'.
2025-05-24 14:12:23,033 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 1/5): 000004.jpeg vs 000001.jpg
2025-05-24 14:12:26,360 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.9365, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:12:26,360 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 2/5): 000004.jpeg vs 000002.jpg
2025-05-24 14:12:29,804 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.9498, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:12:29,805 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 3/5): 000004.jpeg vs 000003.jpg
2025-05-24 14:12:33,016 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.9556, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:12:33,016 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 4/5): 000004.jpeg vs 000004.jpg
2025-05-24 14:12:37,509 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.9611, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:12:37,509 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 5/5): 000004.jpeg vs 000005.jpg
2025-05-24 14:12:41,544 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.8812, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:12:41,545 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:12:41,545 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 3/3: 'Facenet'
2025-05-24 14:12:41,545 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.4 for model 'Facenet' with metric 'cosine'.
2025-05-24 14:12:41,546 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 1/5): 000004.jpeg vs 000001.jpg
2025-05-24 14:12:44,674 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000001.jpg') (Dist: 0.8660, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:12:44,675 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 2/5): 000004.jpeg vs 000002.jpg
2025-05-24 14:12:48,227 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000002.jpg') (Dist: 0.8719, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:12:48,227 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 3/5): 000004.jpeg vs 000003.jpg
2025-05-24 14:12:51,392 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000003.jpg') (Dist: 1.0224, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:12:51,392 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 4/5): 000004.jpeg vs 000004.jpg
2025-05-24 14:12:55,706 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000004.jpg') (Dist: 0.8364, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:12:55,707 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 5/5): 000004.jpeg vs 000005.jpg
2025-05-24 14:12:59,564 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000005.jpg') (Dist: 0.8094, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:12:59,564 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'Facenet': NOT VERIFIED
2025-05-24 14:12:59,564 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:280 -   DeepFace P1 'Winston Churchill' Voting: 0/3 models voted YES. Final P1 Verified: False (Threshold: >50%)
2025-05-24 14:12:59,564 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:340 -   DeepFace: Skipping P2 'Oprah Winfrey' check as P1 'Winston Churchill' was not verified by vote.
2025-05-24 14:12:59,564 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:346 -   DeepFace Multi-Model Verification: One or both not verified by vote. P1_verified: False, P2_verified: False
2025-05-24 14:12:59,565 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:206 -   Verifying image: 000001.jpg for 'Winston Churchill' and 'Oprah Winfrey' using DeepFace (multiple models: ArcFace, VGG-Face, Facenet).
2025-05-24 14:12:59,565 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Winston Churchill (target count: 5)
2025-05-24 14:12:59,565 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Winston Churchill' in reference_faces/Winston_Churchill.
2025-05-24 14:12:59,565 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Winston Churchill'. Using top 5.
2025-05-24 14:12:59,565 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Oprah Winfrey (target count: 5)
2025-05-24 14:12:59,565 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Oprah Winfrey' in reference_faces/Oprah_Winfrey.
2025-05-24 14:12:59,565 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Oprah Winfrey'. Using top 5.
2025-05-24 14:12:59,565 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:224 -   DeepFace: Verifying P1 'Winston Churchill' using 5 reference image(s) across 3 model(s).
2025-05-24 14:12:59,565 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 1/3: 'ArcFace'
2025-05-24 14:12:59,565 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.68 for model 'ArcFace' with metric 'cosine'.
2025-05-24 14:12:59,565 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 1/5): 000001.jpg vs 000001.jpg
2025-05-24 14:13:02,179 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:268 -       P1 verification with ArcFace SUCCEEDED (Ref: '000001.jpg') (Dist: 0.5353, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:13:02,180 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'ArcFace': VERIFIED
2025-05-24 14:13:02,180 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 2/3: 'VGG-Face'
2025-05-24 14:13:02,180 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.45 for model 'VGG-Face' with metric 'cosine'.
2025-05-24 14:13:02,180 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 1/5): 000001.jpg vs 000001.jpg
2025-05-24 14:13:04,995 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.5632, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:13:04,995 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 2/5): 000001.jpg vs 000002.jpg
2025-05-24 14:13:08,015 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.7612, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:13:08,016 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 3/5): 000001.jpg vs 000003.jpg
2025-05-24 14:13:10,721 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.7357, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:13:10,721 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 4/5): 000001.jpg vs 000004.jpg
2025-05-24 14:13:14,672 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.7732, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:13:14,672 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 5/5): 000001.jpg vs 000005.jpg
2025-05-24 14:13:18,183 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.4590, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:13:18,183 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:13:18,184 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 3/3: 'Facenet'
2025-05-24 14:13:18,184 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.4 for model 'Facenet' with metric 'cosine'.
2025-05-24 14:13:18,184 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 1/5): 000001.jpg vs 000001.jpg
2025-05-24 14:13:20,838 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000001.jpg') (Dist: 0.4030, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:13:20,838 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 2/5): 000001.jpg vs 000002.jpg
2025-05-24 14:13:23,622 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:268 -       P1 verification with Facenet SUCCEEDED (Ref: '000002.jpg') (Dist: 0.3530, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:13:23,622 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'Facenet': VERIFIED
2025-05-24 14:13:23,622 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:280 -   DeepFace P1 'Winston Churchill' Voting: 2/3 models voted YES. Final P1 Verified: True (Threshold: >50%)
2025-05-24 14:13:23,622 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:285 -   DeepFace: P1 'Winston Churchill' verified by vote. Verifying P2 'Oprah Winfrey' using 5 reference image(s) across 3 model(s).
2025-05-24 14:13:23,622 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:287 -     P2 Model 1/3: 'ArcFace'
2025-05-24 14:13:23,622 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 1/5): 000001.jpg vs 000001.jpg
2025-05-24 14:13:26,468 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000001.jpg') (Dist: 1.1437, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:13:26,469 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 2/5): 000001.jpg vs 000002.jpg
2025-05-24 14:13:30,177 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000002.jpg') (Dist: 1.0684, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:13:30,177 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 3/5): 000001.jpg vs 000003.jpg
2025-05-24 14:13:33,657 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000003.jpg') (Dist: 0.9587, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:13:33,658 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 4/5): 000001.jpg vs 000004.jpg
2025-05-24 14:13:38,107 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000004.jpg') (Dist: 1.0614, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:13:38,107 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 5/5): 000001.jpg vs 000005.jpg
2025-05-24 14:13:41,337 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000005.jpg') (Dist: 0.8214, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:13:41,338 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:334 -     P2 Result for model 'ArcFace': NOT VERIFIED
2025-05-24 14:13:41,338 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:287 -     P2 Model 2/3: 'VGG-Face'
2025-05-24 14:13:41,338 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 1/5): 000001.jpg vs 000001.jpg
2025-05-24 14:13:44,367 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.9295, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:13:44,367 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 2/5): 000001.jpg vs 000002.jpg
2025-05-24 14:13:48,194 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.9181, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:13:48,195 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 3/5): 000001.jpg vs 000003.jpg
2025-05-24 14:13:51,775 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.9220, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:13:51,776 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 4/5): 000001.jpg vs 000004.jpg
2025-05-24 14:13:56,152 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.9333, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:13:56,153 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 5/5): 000001.jpg vs 000005.jpg
2025-05-24 14:13:59,518 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.8870, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:13:59,518 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:334 -     P2 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:13:59,519 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:287 -     P2 Model 3/3: 'Facenet'
2025-05-24 14:13:59,519 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 1/5): 000001.jpg vs 000001.jpg
2025-05-24 14:14:02,526 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000001.jpg') (Dist: 1.0616, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:14:02,527 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 2/5): 000001.jpg vs 000002.jpg
2025-05-24 14:14:06,276 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000002.jpg') (Dist: 0.9333, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:14:06,276 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 3/5): 000001.jpg vs 000003.jpg
2025-05-24 14:14:09,957 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000003.jpg') (Dist: 0.8748, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:14:09,957 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 4/5): 000001.jpg vs 000004.jpg
2025-05-24 14:14:14,528 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000004.jpg') (Dist: 0.9300, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:14:14,529 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 5/5): 000001.jpg vs 000005.jpg
2025-05-24 14:14:18,144 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000005.jpg') (Dist: 0.8255, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:14:18,145 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:334 -     P2 Result for model 'Facenet': NOT VERIFIED
2025-05-24 14:14:18,145 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:338 -   DeepFace P2 'Oprah Winfrey' Voting: 0/3 models voted YES. Final P2 Verified: False (Threshold: >50%)
2025-05-24 14:14:18,145 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:346 -   DeepFace Multi-Model Verification: One or both not verified by vote. P1_verified: True, P2_verified: False
2025-05-24 14:14:18,147 - VisualChainApp - WARNING - image_verifier.verify_and_potentially_reprompt_link:402 -   Verification FAILED for all 3 checked images for 'Winston Churchill' and 'Oprah Winfrey' using DeepFace Multi-Model.
2025-05-24 14:14:18,147 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:406 -   Reprompting Gemini for an alternative link (due to image verification failure with DeepFace Multi-Model).
2025-05-24 14:14:18,147 - VisualChainApp - INFO - image_verifier.query_gemini_text_for_retry:82 - Sending text prompt to Gemini for retry (from image_verifier)...
2025-05-24 14:14:18,147 - VisualChainApp - DEBUG - image_verifier.query_gemini_text_for_retry:84 - User part of prompt for Gemini text (verifier retry):
<retry_connection_request>
  <person1>Winston Churchill</person1>
  <person2>Oprah Winfrey</person2>
  <failed_link_instruction>
    IMPORTANT: Your previous suggestion for a co-occurrence between Winston Churchill and Oprah Winfrey (event: "While there's no direct documented meeting between Churchill and Oprah, Oprah has extensively covered historical figures and events in her show, including segments likely referencing Churchill.", query: ""Winston Churchill" AND "Oprah Winfrey"") could NOT be
2025-05-24 14:14:35,141 - VisualChainApp - DEBUG - image_verifier.clean_gemini_xml_response_verifier:72 - Raw AI output before cleaning (verifier response) (first 300 chars): ```xml
<no_alternative_link_found reason="After an exhaustive search of reputable historical archives, biographical materials, and media databases, no verifiable evidence of a meeting or documented co-occurrence between Winston Churchill and Oprah Winfrey has been found.  Given the significant tempo
2025-05-24 14:14:35,143 - VisualChainApp - DEBUG - image_verifier.clean_gemini_xml_response_verifier:79 - AI output after cleaning (verifier resp) (first 300 chars): <no_alternative_link_found reason="After an exhaustive search of reputable historical archives, biographical materials, and media databases, no verifiable evidence of a meeting or documented co-occurrence between Winston Churchill and Oprah Winfrey has been found.  Given the significant temporal gap
2025-05-24 14:14:35,143 - VisualChainApp - DEBUG - image_verifier.query_gemini_text_for_retry:89 - Cleaned Gemini response from text query (verifier retry): <no_alternative_link_found reason="After an exhaustive search of reputable historical archives, biographical materials, and media databases, no verifiable evidence of a meeting or documented co-occurrence between Winston Churchill and Oprah Winfrey has been found.  Given the significant temporal gap
2025-05-24 14:14:35,145 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:412 -   Gemini indicated no alternative link found (reprompt after verification failure): After an exhaustive search of reputable historical archives, biographical materials, and media databases, no verifiable evidence of a meeting or documented co-occurrence between Winston Churchill and Oprah Winfrey has been found.  Given the significant temporal gap between their lifetimes, and the lack of any known shared professional, social, or political circles, establishing a plausible connection, let alone one supported by Tier 1 evidence, proves impossible.  All plausible intermediaries connecting figures from Churchill's era to contemporary figures like Oprah Winfrey lack sufficient documented interaction to create a chain meeting the specified evidence tier requirements. Even attempting to build a chain through intermediary figures known to have discussed Churchill (historians, documentarians, etc.) fails to yield verifiable co-occurrences with Oprah Winfrey that meet the specified evidence tier and verifiability standards.
2025-05-24 14:14:35,145 - VisualChainApp - WARNING - main_orchestrator.main:325 -   Segment 'Winston Churchill' → 'Oprah Winfrey' failed verification (status from verifier: FAILED_VERIFICATION_NO_ALTERNATIVE).
2025-05-24 14:14:35,145 - VisualChainApp - INFO - main_orchestrator.main:344 -   Attempting orchestrator-level sub-chain re-generation from 'Winston Churchill' to 'James Charles'.
2025-05-24 14:14:35,145 - VisualChainApp - INFO - main_orchestrator.main:354 -     Orchestrator sub-chain attempt 1/3 from 'Winston Churchill' to 'James Charles'
2025-05-24 14:14:35,145 - VisualChainApp - DEBUG - main_orchestrator.main:385 -     Sub-chain exclusion instruction: IMPORTANT: You are building a new sub-chain from 'Winston Churchill' to 'James Charles'.
1. Crucially, DO NOT suggest 'Oprah Winfrey' as the immediate next connection from 'Winston Churchill'. That path just failed.

3. The goal is to find a NEW, fresh path from 'Winston Churchill' to 'James Charles'.
2025-05-24 14:14:35,146 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain:110 - Requesting chain: Winston Churchill -> ... -> James Charles.
2025-05-24 14:14:35,146 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain:112 - With exclusion instruction: IMPORTANT: You are building a new sub-chain from 'Winston Churchill' to 'James Charles'.
1. Crucially, DO NOT suggest 'Oprah Winfrey' as the immediate next connection from 'Winston Churchill'. That path just failed.

3. The goal is to find a NEW, fresh path from 'Winston Churchill' to 'James Charles'.
2025-05-24 14:14:35,147 - VisualChainApp - INFO - initial_gemini_query._load_gemini_task_header:13 - Gemini task header loaded from prompts/gemini_task_header.txt
2025-05-24 14:14:35,147 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:50 - Querying Gemini with pre-formatted user input for a chain.
2025-05-24 14:14:35,159 - VisualChainApp - DEBUG - initial_gemini_query.get_initial_chain_from_gemini_direct:73 - User input XML for Gemini (part of full prompt):
## Task Execution
Now, using the rules, input format, and output formats defined above, please process the following connection request to find a full chain:<connection_request>
  <person1>Winston Churchill</person1>
  <person2>James Charles</person2>
  <additional_instructions>IMPORTANT: You are bu
... (user input snippet) ...
mmediate next connection from 'Winston Churchill'. That path just failed.

3. The goal is to find a NEW, fresh path from 'Winston Churchill' to 'James Charles'.</additional_instructions> 
  <!-- This will be empty for the first call, or contain exclusion for sub-chain calls -->
</connection_request>
2025-05-24 14:14:35,160 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:74 - --- Sending to Gemini (initial_gemini_query.get_initial_chain_from_gemini_direct) ---
2025-05-24 14:14:41,162 - VisualChainApp - DEBUG - initial_gemini_query.clean_gemini_xml_response:26 - Raw AI output before cleaning (first 300 chars): ```xml
<connection_chain>
  <chain_summary>
    <total_links>3</total_links>
    <subjects_connected>Winston Churchill → Franklin D. Roosevelt →  Queen Elizabeth II → James Charles</subjects_connected>
    <chain_type>Extended</chain_type>
    <intermediary_count>2</intermediary_count>
    <research
2025-05-24 14:14:41,162 - VisualChainApp - DEBUG - initial_gemini_query.clean_gemini_xml_response:46 - AI output after cleaning (first 300 chars): <connection_chain>
  <chain_summary>
    <total_links>3</total_links>
    <subjects_connected>Winston Churchill → Franklin D. Roosevelt →  Queen Elizabeth II → James Charles</subjects_connected>
    <chain_type>Extended</chain_type>
    <intermediary_count>2</intermediary_count>
    <research_confid
2025-05-24 14:14:41,163 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:92 - Gemini response parsed as XML (root tag: connection_chain).
2025-05-24 14:14:41,163 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:98 - Received response from Gemini.
2025-05-24 14:14:41,165 - VisualChainApp - INFO - main_orchestrator.main:396 -     Sub-chain attempt output saved to output/temp_files/sub_chain_attempt_Winston_Churchill_to_James_Charles_1.xml
2025-05-24 14:14:41,165 - VisualChainApp - INFO - main_orchestrator.main:410 -     Successfully got new sub-chain from 'Winston Churchill' with 3 link(s). Replacing rest of old chain.
2025-05-24 14:14:41,165 - VisualChainApp - INFO - main_orchestrator.main:256 - --- Processing Link 1/3 (Overall) ---
2025-05-24 14:14:41,166 - VisualChainApp - DEBUG - main_orchestrator.main:257 - Current link to process XML: <link id="1">
    <subjects>Winston Churchill → Franklin D. Roosevelt</subjects>
    <evidence>Both were leaders of Allied powers during World War II and engaged in numerous documented meetings and correspondence.</evidence>
    <source>Numerous historical archives, including the Franklin D. Rooseve
2025-05-24 14:14:41,166 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:112 - Attempting to extract persons from subjects_text: 'Winston Churchill → Franklin D. Roosevelt'
2025-05-24 14:14:41,166 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:128 - Extracted P1: 'Winston Churchill', P2: 'Franklin D. Roosevelt'
2025-05-24 14:14:41,166 - VisualChainApp - INFO - main_orchestrator.main:269 -   Attempting segment: 'Winston Churchill' → 'Franklin D. Roosevelt'
2025-05-24 14:14:41,166 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:22 - Preparing to download images. Target: 'Winston Churchill → Franklin D. Roosevelt', Query: '"Winston Churchill" AND "Franklin D. Roosevelt" WWII meetings', Num: 5, Reference: False
2025-05-24 14:14:41,166 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:43 - Created image download folder: output/connection_chain_images/Winston_Churchill_Franklin_D._Roosevelt
2025-05-24 14:14:41,167 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:50 -   Saving up to 5 images to: output/connection_chain_images/Winston_Churchill_Franklin_D._Roosevelt for query: '"Winston Churchill" AND "Franklin D. Roosevelt" WWII meetings'
2025-05-24 14:14:41,169 - VisualChainApp - DEBUG - image_downloader.fetch_images_for_link:62 - Starting icrawler.crawl for: "Winston Churchill" AND "Franklin D. Roosevelt" WWII meetings (max_num=5)
2025-05-24 14:14:44,186 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:70 -   Finished icrawler.crawl for 'Winston Churchill → Franklin D. Roosevelt'.
2025-05-24 14:14:44,187 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:79 -   Found 5 image files in output/connection_chain_images/Winston_Churchill_Franklin_D._Roosevelt after crawl attempt.
2025-05-24 14:14:44,188 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:363 - --- Verifying link segment: 'Winston Churchill' <-> 'Franklin D. Roosevelt' (using DeepFace Multi-Model) ---
2025-05-24 14:14:44,188 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:386 -   Found 5 images in 'output/connection_chain_images/Winston_Churchill_Franklin_D._Roosevelt'. Will check up to 3 with DeepFace Multi-Model.
2025-05-24 14:14:44,189 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:206 -   Verifying image: 000004.jpg for 'Winston Churchill' and 'Franklin D. Roosevelt' using DeepFace (multiple models: ArcFace, VGG-Face, Facenet).
2025-05-24 14:14:44,189 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Winston Churchill (target count: 5)
2025-05-24 14:14:44,189 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Winston Churchill' in reference_faces/Winston_Churchill.
2025-05-24 14:14:44,189 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Winston Churchill'. Using top 5.
2025-05-24 14:14:44,189 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Franklin D. Roosevelt (target count: 5)
2025-05-24 14:14:44,190 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Franklin D. Roosevelt' in reference_faces/Franklin_D._Roosevelt.
2025-05-24 14:14:44,190 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Franklin D. Roosevelt'. Using top 5.
2025-05-24 14:14:44,190 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:224 -   DeepFace: Verifying P1 'Winston Churchill' using 5 reference image(s) across 3 model(s).
2025-05-24 14:14:44,190 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 1/3: 'ArcFace'
2025-05-24 14:14:44,190 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.68 for model 'ArcFace' with metric 'cosine'.
2025-05-24 14:14:44,190 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:14:47,324 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000001.jpg') (Dist: 0.7091, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:14:47,324 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:14:50,681 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:268 -       P1 verification with ArcFace SUCCEEDED (Ref: '000002.jpg') (Dist: 0.6630, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:14:50,682 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'ArcFace': VERIFIED
2025-05-24 14:14:50,682 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 2/3: 'VGG-Face'
2025-05-24 14:14:50,682 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.45 for model 'VGG-Face' with metric 'cosine'.
2025-05-24 14:14:50,682 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:14:54,260 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.4979, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:14:54,261 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:14:57,754 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.5745, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:14:57,755 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 3/5): 000004.jpg vs 000003.jpg
2025-05-24 14:15:01,065 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.7551, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:15:01,065 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 4/5): 000004.jpg vs 000004.jpg
2025-05-24 14:15:05,701 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.5217, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:15:05,701 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 5/5): 000004.jpg vs 000005.jpg
2025-05-24 14:15:10,138 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:268 -       P1 verification with VGG-Face SUCCEEDED (Ref: '000005.jpg') (Dist: 0.3772, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:15:10,140 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'VGG-Face': VERIFIED
2025-05-24 14:15:10,140 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 3/3: 'Facenet'
2025-05-24 14:15:10,140 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.4 for model 'Facenet' with metric 'cosine'.
2025-05-24 14:15:10,140 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:15:13,492 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:268 -       P1 verification with Facenet SUCCEEDED (Ref: '000001.jpg') (Dist: 0.2968, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:15:13,492 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'Facenet': VERIFIED
2025-05-24 14:15:13,492 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:280 -   DeepFace P1 'Winston Churchill' Voting: 3/3 models voted YES. Final P1 Verified: True (Threshold: >50%)
2025-05-24 14:15:13,492 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:285 -   DeepFace: P1 'Winston Churchill' verified by vote. Verifying P2 'Franklin D. Roosevelt' using 5 reference image(s) across 3 model(s).
2025-05-24 14:15:13,492 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:287 -     P2 Model 1/3: 'ArcFace'
2025-05-24 14:15:13,492 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:15:18,474 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:326 -       P2 verification with ArcFace SUCCEEDED (Ref: '000001.jpg') (Dist: 0.5248, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:15:18,475 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:334 -     P2 Result for model 'ArcFace': VERIFIED
2025-05-24 14:15:18,475 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:287 -     P2 Model 2/3: 'VGG-Face'
2025-05-24 14:15:18,475 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:15:23,639 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.5337, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:15:23,640 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:15:27,692 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.6873, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:15:27,693 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 3/5): 000004.jpg vs 000003.jpg
2025-05-24 14:15:32,306 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.6081, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:15:32,306 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 4/5): 000004.jpg vs 000004.jpg
2025-05-24 14:15:36,453 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.5677, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:15:36,453 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 5/5): 000004.jpg vs 000005.jpg
2025-05-24 14:15:40,164 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.6467, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:15:40,164 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:334 -     P2 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:15:40,164 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:287 -     P2 Model 3/3: 'Facenet'
2025-05-24 14:15:40,164 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:15:45,100 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000001.jpg') (Dist: 0.4023, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:15:45,100 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:15:48,995 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:326 -       P2 verification with Facenet SUCCEEDED (Ref: '000002.jpg') (Dist: 0.3205, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:15:48,995 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:334 -     P2 Result for model 'Facenet': VERIFIED
2025-05-24 14:15:48,995 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:338 -   DeepFace P2 'Franklin D. Roosevelt' Voting: 2/3 models voted YES. Final P2 Verified: True (Threshold: >50%)
2025-05-24 14:15:48,995 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:343 -   DeepFace Multi-Model Verification: Both Winston Churchill and Franklin D. Roosevelt successfully verified by vote in 000004.jpg.
2025-05-24 14:15:48,995 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:394 -   SUCCESS: Verified 'Winston Churchill' and 'Franklin D. Roosevelt' in 000004.jpg using DeepFace Multi-Model
2025-05-24 14:15:48,996 - VisualChainApp - INFO - main_orchestrator.main:294 -   SUCCESS: Segment 'Winston Churchill' → 'Franklin D. Roosevelt' verified with image: output/connection_chain_images/Winston_Churchill_Franklin_D._Roosevelt/000004.jpg
2025-05-24 14:15:48,999 - VisualChainApp - INFO - main_orchestrator.main:312 -   Copied verified image to: output/connection_chain_images_verified/01_Winston_Churchill_vs_Franklin_D._Roosevelt.jpg
2025-05-24 14:15:48,999 - VisualChainApp - INFO - main_orchestrator.main:256 - --- Processing Link 2/3 (Overall) ---
2025-05-24 14:15:49,000 - VisualChainApp - DEBUG - main_orchestrator.main:257 - Current link to process XML: <link id="2">
    <subjects>Franklin D. Roosevelt → Queen Elizabeth II</subjects>
    <evidence>Roosevelt and Queen Elizabeth II exchanged correspondence and had diplomatic relations during World War II.</evidence>
    <source>National Archives (UK) and Franklin D. Roosevelt Presidential Library and
2025-05-24 14:15:49,000 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:112 - Attempting to extract persons from subjects_text: 'Franklin D. Roosevelt → Queen Elizabeth II'
2025-05-24 14:15:49,000 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:128 - Extracted P1: 'Franklin D. Roosevelt', P2: 'Queen Elizabeth II'
2025-05-24 14:15:49,000 - VisualChainApp - INFO - main_orchestrator.main:269 -   Attempting segment: 'Franklin D. Roosevelt' → 'Queen Elizabeth II'
2025-05-24 14:15:49,000 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:22 - Preparing to download images. Target: 'Franklin D. Roosevelt → Queen Elizabeth II', Query: '"Franklin D. Roosevelt" AND "Queen Elizabeth II" diplomatic correspondence', Num: 5, Reference: False
2025-05-24 14:15:49,000 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:43 - Created image download folder: output/connection_chain_images/Franklin_D._Roosevelt_Queen_Elizabeth_II
2025-05-24 14:15:49,000 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:50 -   Saving up to 5 images to: output/connection_chain_images/Franklin_D._Roosevelt_Queen_Elizabeth_II for query: '"Franklin D. Roosevelt" AND "Queen Elizabeth II" diplomatic correspondence'
2025-05-24 14:15:49,002 - VisualChainApp - DEBUG - image_downloader.fetch_images_for_link:62 - Starting icrawler.crawl for: "Franklin D. Roosevelt" AND "Queen Elizabeth II" diplomatic correspondence (max_num=5)
2025-05-24 14:15:52,015 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:70 -   Finished icrawler.crawl for 'Franklin D. Roosevelt → Queen Elizabeth II'.
2025-05-24 14:15:52,017 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:79 -   Found 5 image files in output/connection_chain_images/Franklin_D._Roosevelt_Queen_Elizabeth_II after crawl attempt.
2025-05-24 14:15:52,017 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:363 - --- Verifying link segment: 'Franklin D. Roosevelt' <-> 'Queen Elizabeth II' (using DeepFace Multi-Model) ---
2025-05-24 14:15:52,018 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:386 -   Found 5 images in 'output/connection_chain_images/Franklin_D._Roosevelt_Queen_Elizabeth_II'. Will check up to 3 with DeepFace Multi-Model.
2025-05-24 14:15:52,018 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:206 -   Verifying image: 000004.jpg for 'Franklin D. Roosevelt' and 'Queen Elizabeth II' using DeepFace (multiple models: ArcFace, VGG-Face, Facenet).
2025-05-24 14:15:52,018 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Franklin D. Roosevelt (target count: 5)
2025-05-24 14:15:52,019 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Franklin D. Roosevelt' in reference_faces/Franklin_D._Roosevelt.
2025-05-24 14:15:52,019 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Franklin D. Roosevelt'. Using top 5.
2025-05-24 14:15:52,019 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Queen Elizabeth II (target count: 5)
2025-05-24 14:15:52,019 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Queen Elizabeth II' in reference_faces/Queen_Elizabeth_II.
2025-05-24 14:15:52,019 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Queen Elizabeth II'. Using top 5.
2025-05-24 14:15:52,019 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:224 -   DeepFace: Verifying P1 'Franklin D. Roosevelt' using 5 reference image(s) across 3 model(s).
2025-05-24 14:15:52,020 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 1/3: 'ArcFace'
2025-05-24 14:15:52,020 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.68 for model 'ArcFace' with metric 'cosine'.
2025-05-24 14:15:52,020 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:15:56,936 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:268 -       P1 verification with ArcFace SUCCEEDED (Ref: '000001.jpg') (Dist: 0.1374, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:15:56,936 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'ArcFace': VERIFIED
2025-05-24 14:15:56,936 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 2/3: 'VGG-Face'
2025-05-24 14:15:56,936 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.45 for model 'VGG-Face' with metric 'cosine'.
2025-05-24 14:15:56,936 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:16:02,654 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.6015, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:16:02,655 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:16:07,285 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.7681, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:16:07,285 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 3/5): 000004.jpg vs 000003.jpg
2025-05-24 14:16:12,760 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.8183, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:16:12,761 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 4/5): 000004.jpg vs 000004.jpg
2025-05-24 14:16:17,598 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.7618, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:16:17,598 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 5/5): 000004.jpg vs 000005.jpg
2025-05-24 14:16:21,913 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.7993, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:16:21,913 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:16:21,913 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 3/3: 'Facenet'
2025-05-24 14:16:21,913 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.4 for model 'Facenet' with metric 'cosine'.
2025-05-24 14:16:21,913 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:16:27,030 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:268 -       P1 verification with Facenet SUCCEEDED (Ref: '000001.jpg') (Dist: 0.1663, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:16:27,031 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'Facenet': VERIFIED
2025-05-24 14:16:27,031 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:280 -   DeepFace P1 'Franklin D. Roosevelt' Voting: 2/3 models voted YES. Final P1 Verified: True (Threshold: >50%)
2025-05-24 14:16:27,031 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:285 -   DeepFace: P1 'Franklin D. Roosevelt' verified by vote. Verifying P2 'Queen Elizabeth II' using 5 reference image(s) across 3 model(s).
2025-05-24 14:16:27,031 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:287 -     P2 Model 1/3: 'ArcFace'
2025-05-24 14:16:27,031 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:16:30,991 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000001.jpg') (Dist: 0.8522, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:16:30,993 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:16:35,342 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000002.jpg') (Dist: 0.7399, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:16:35,342 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 3/5): 000004.jpg vs 000003.jpg
2025-05-24 14:16:39,580 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000003.jpg') (Dist: 0.8682, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:16:39,582 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 4/5): 000004.jpg vs 000004.jpg
2025-05-24 14:16:44,654 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000004.jpg') (Dist: 0.8113, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:16:44,654 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 5/5): 000004.jpg vs 000005.jpg
2025-05-24 14:16:48,720 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000005.jpg') (Dist: 0.8118, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:16:48,720 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:334 -     P2 Result for model 'ArcFace': NOT VERIFIED
2025-05-24 14:16:48,720 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:287 -     P2 Model 2/3: 'VGG-Face'
2025-05-24 14:16:48,720 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:16:53,298 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.7692, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:16:53,298 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:16:58,175 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.7949, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:16:58,177 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 3/5): 000004.jpg vs 000003.jpg
2025-05-24 14:17:03,052 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.7778, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:17:03,052 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 4/5): 000004.jpg vs 000004.jpg
2025-05-24 14:17:09,118 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.7672, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:17:09,119 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 5/5): 000004.jpg vs 000005.jpg
2025-05-24 14:17:14,134 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.7738, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:17:14,134 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:334 -     P2 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:17:14,134 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:287 -     P2 Model 3/3: 'Facenet'
2025-05-24 14:17:14,134 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:17:18,241 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000001.jpg') (Dist: 0.6811, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:17:18,243 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:17:22,564 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000002.jpg') (Dist: 0.7598, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:17:22,564 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 3/5): 000004.jpg vs 000003.jpg
2025-05-24 14:17:26,843 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000003.jpg') (Dist: 0.8278, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:17:26,844 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 4/5): 000004.jpg vs 000004.jpg
2025-05-24 14:17:31,992 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000004.jpg') (Dist: 0.8051, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:17:31,992 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 5/5): 000004.jpg vs 000005.jpg
2025-05-24 14:17:35,968 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000005.jpg') (Dist: 0.7959, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:17:35,969 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:334 -     P2 Result for model 'Facenet': NOT VERIFIED
2025-05-24 14:17:35,969 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:338 -   DeepFace P2 'Queen Elizabeth II' Voting: 0/3 models voted YES. Final P2 Verified: False (Threshold: >50%)
2025-05-24 14:17:35,969 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:346 -   DeepFace Multi-Model Verification: One or both not verified by vote. P1_verified: True, P2_verified: False
2025-05-24 14:17:35,969 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:206 -   Verifying image: 000005.jpg for 'Franklin D. Roosevelt' and 'Queen Elizabeth II' using DeepFace (multiple models: ArcFace, VGG-Face, Facenet).
2025-05-24 14:17:35,969 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Franklin D. Roosevelt (target count: 5)
2025-05-24 14:17:35,971 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Franklin D. Roosevelt' in reference_faces/Franklin_D._Roosevelt.
2025-05-24 14:17:35,971 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Franklin D. Roosevelt'. Using top 5.
2025-05-24 14:17:35,971 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Queen Elizabeth II (target count: 5)
2025-05-24 14:17:35,971 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Queen Elizabeth II' in reference_faces/Queen_Elizabeth_II.
2025-05-24 14:17:35,971 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Queen Elizabeth II'. Using top 5.
2025-05-24 14:17:35,971 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:224 -   DeepFace: Verifying P1 'Franklin D. Roosevelt' using 5 reference image(s) across 3 model(s).
2025-05-24 14:17:35,971 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 1/3: 'ArcFace'
2025-05-24 14:17:35,971 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.68 for model 'ArcFace' with metric 'cosine'.
2025-05-24 14:17:35,971 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 1/5): 000005.jpg vs 000001.jpg
2025-05-24 14:17:40,665 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:268 -       P1 verification with ArcFace SUCCEEDED (Ref: '000001.jpg') (Dist: 0.1452, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:17:40,665 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'ArcFace': VERIFIED
2025-05-24 14:17:40,665 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 2/3: 'VGG-Face'
2025-05-24 14:17:40,665 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.45 for model 'VGG-Face' with metric 'cosine'.
2025-05-24 14:17:40,665 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 1/5): 000005.jpg vs 000001.jpg
2025-05-24 14:17:45,749 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.6489, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:17:45,749 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 2/5): 000005.jpg vs 000002.jpg
2025-05-24 14:17:49,709 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.8656, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:17:49,710 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 3/5): 000005.jpg vs 000003.jpg
2025-05-24 14:17:54,380 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.6908, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:17:54,381 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 4/5): 000005.jpg vs 000004.jpg
2025-05-24 14:17:58,410 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.7947, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:17:58,410 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 5/5): 000005.jpg vs 000005.jpg
2025-05-24 14:18:01,970 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.8748, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:18:01,971 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:18:01,971 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 3/3: 'Facenet'
2025-05-24 14:18:01,971 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.4 for model 'Facenet' with metric 'cosine'.
2025-05-24 14:18:01,971 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 1/5): 000005.jpg vs 000001.jpg
2025-05-24 14:18:06,658 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:268 -       P1 verification with Facenet SUCCEEDED (Ref: '000001.jpg') (Dist: 0.3552, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:18:06,659 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'Facenet': VERIFIED
2025-05-24 14:18:06,659 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:280 -   DeepFace P1 'Franklin D. Roosevelt' Voting: 2/3 models voted YES. Final P1 Verified: True (Threshold: >50%)
2025-05-24 14:18:06,659 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:285 -   DeepFace: P1 'Franklin D. Roosevelt' verified by vote. Verifying P2 'Queen Elizabeth II' using 5 reference image(s) across 3 model(s).
2025-05-24 14:18:06,659 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:287 -     P2 Model 1/3: 'ArcFace'
2025-05-24 14:18:06,659 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 1/5): 000005.jpg vs 000001.jpg
2025-05-24 14:18:10,107 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000001.jpg') (Dist: 0.7394, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:18:10,107 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 2/5): 000005.jpg vs 000002.jpg
2025-05-24 14:18:13,851 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000002.jpg') (Dist: 0.8031, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:18:13,851 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 3/5): 000005.jpg vs 000003.jpg
2025-05-24 14:18:17,424 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000003.jpg') (Dist: 0.9278, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:18:17,425 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 4/5): 000005.jpg vs 000004.jpg
2025-05-24 14:18:22,128 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000004.jpg') (Dist: 0.8970, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:18:22,129 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 5/5): 000005.jpg vs 000005.jpg
2025-05-24 14:18:25,531 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000005.jpg') (Dist: 0.8064, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:18:25,532 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:334 -     P2 Result for model 'ArcFace': NOT VERIFIED
2025-05-24 14:18:25,532 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:287 -     P2 Model 2/3: 'VGG-Face'
2025-05-24 14:18:25,532 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 1/5): 000005.jpg vs 000001.jpg
2025-05-24 14:18:29,257 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.8836, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:18:29,257 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 2/5): 000005.jpg vs 000002.jpg
2025-05-24 14:18:33,333 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.7794, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:18:33,333 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 3/5): 000005.jpg vs 000003.jpg
2025-05-24 14:18:37,260 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.8229, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:18:37,260 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 4/5): 000005.jpg vs 000004.jpg
2025-05-24 14:18:42,056 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.8615, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:18:42,056 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 5/5): 000005.jpg vs 000005.jpg
2025-05-24 14:18:45,785 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.7919, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:18:45,785 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:334 -     P2 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:18:45,785 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:287 -     P2 Model 3/3: 'Facenet'
2025-05-24 14:18:45,785 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 1/5): 000005.jpg vs 000001.jpg
2025-05-24 14:18:49,273 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000001.jpg') (Dist: 0.5697, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:18:49,274 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 2/5): 000005.jpg vs 000002.jpg
2025-05-24 14:18:53,060 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000002.jpg') (Dist: 0.6154, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:18:53,060 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 3/5): 000005.jpg vs 000003.jpg
2025-05-24 14:18:56,643 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000003.jpg') (Dist: 0.5948, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:18:56,644 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 4/5): 000005.jpg vs 000004.jpg
2025-05-24 14:19:01,203 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000004.jpg') (Dist: 0.6035, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:19:01,203 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 5/5): 000005.jpg vs 000005.jpg
2025-05-24 14:19:04,549 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000005.jpg') (Dist: 0.5448, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:19:04,550 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:334 -     P2 Result for model 'Facenet': NOT VERIFIED
2025-05-24 14:19:04,550 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:338 -   DeepFace P2 'Queen Elizabeth II' Voting: 0/3 models voted YES. Final P2 Verified: False (Threshold: >50%)
2025-05-24 14:19:04,550 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:346 -   DeepFace Multi-Model Verification: One or both not verified by vote. P1_verified: True, P2_verified: False
2025-05-24 14:19:04,550 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:206 -   Verifying image: 000001.jpg for 'Franklin D. Roosevelt' and 'Queen Elizabeth II' using DeepFace (multiple models: ArcFace, VGG-Face, Facenet).
2025-05-24 14:19:04,550 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Franklin D. Roosevelt (target count: 5)
2025-05-24 14:19:04,551 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Franklin D. Roosevelt' in reference_faces/Franklin_D._Roosevelt.
2025-05-24 14:19:04,551 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Franklin D. Roosevelt'. Using top 5.
2025-05-24 14:19:04,551 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Queen Elizabeth II (target count: 5)
2025-05-24 14:19:04,551 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Queen Elizabeth II' in reference_faces/Queen_Elizabeth_II.
2025-05-24 14:19:04,551 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Queen Elizabeth II'. Using top 5.
2025-05-24 14:19:04,551 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:224 -   DeepFace: Verifying P1 'Franklin D. Roosevelt' using 5 reference image(s) across 3 model(s).
2025-05-24 14:19:04,551 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 1/3: 'ArcFace'
2025-05-24 14:19:04,551 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.68 for model 'ArcFace' with metric 'cosine'.
2025-05-24 14:19:04,551 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 1/5): 000001.jpg vs 000001.jpg
2025-05-24 14:19:09,647 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:268 -       P1 verification with ArcFace SUCCEEDED (Ref: '000001.jpg') (Dist: 0.2625, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:19:09,647 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'ArcFace': VERIFIED
2025-05-24 14:19:09,647 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 2/3: 'VGG-Face'
2025-05-24 14:19:09,647 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.45 for model 'VGG-Face' with metric 'cosine'.
2025-05-24 14:19:09,648 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 1/5): 000001.jpg vs 000001.jpg
2025-05-24 14:19:15,362 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.7866, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:19:15,363 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 2/5): 000001.jpg vs 000002.jpg
2025-05-24 14:19:19,964 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.8379, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:19:19,964 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 3/5): 000001.jpg vs 000003.jpg
2025-05-24 14:19:25,144 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.6972, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:19:25,145 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 4/5): 000001.jpg vs 000004.jpg
2025-05-24 14:19:29,664 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.7715, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:19:29,665 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 5/5): 000001.jpg vs 000005.jpg
2025-05-24 14:19:33,979 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.8664, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:19:33,979 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:19:33,979 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 3/3: 'Facenet'
2025-05-24 14:19:33,979 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.4 for model 'Facenet' with metric 'cosine'.
2025-05-24 14:19:33,979 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 1/5): 000001.jpg vs 000001.jpg
2025-05-24 14:19:39,182 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000001.jpg') (Dist: 0.4480, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:19:39,183 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 2/5): 000001.jpg vs 000002.jpg
2025-05-24 14:19:43,319 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000002.jpg') (Dist: 0.8490, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:19:43,320 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 3/5): 000001.jpg vs 000003.jpg
2025-05-24 14:19:47,918 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000003.jpg') (Dist: 0.7777, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:19:47,918 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 4/5): 000001.jpg vs 000004.jpg
2025-05-24 14:19:52,043 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000004.jpg') (Dist: 0.9197, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:19:52,043 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 5/5): 000001.jpg vs 000005.jpg
2025-05-24 14:19:55,879 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000005.jpg') (Dist: 0.9562, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:19:55,880 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'Facenet': NOT VERIFIED
2025-05-24 14:19:55,880 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:280 -   DeepFace P1 'Franklin D. Roosevelt' Voting: 1/3 models voted YES. Final P1 Verified: False (Threshold: >50%)
2025-05-24 14:19:55,880 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:340 -   DeepFace: Skipping P2 'Queen Elizabeth II' check as P1 'Franklin D. Roosevelt' was not verified by vote.
2025-05-24 14:19:55,880 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:346 -   DeepFace Multi-Model Verification: One or both not verified by vote. P1_verified: False, P2_verified: False
2025-05-24 14:19:55,883 - VisualChainApp - WARNING - image_verifier.verify_and_potentially_reprompt_link:402 -   Verification FAILED for all 3 checked images for 'Franklin D. Roosevelt' and 'Queen Elizabeth II' using DeepFace Multi-Model.
2025-05-24 14:19:55,883 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:406 -   Reprompting Gemini for an alternative link (due to image verification failure with DeepFace Multi-Model).
2025-05-24 14:19:55,883 - VisualChainApp - INFO - image_verifier.query_gemini_text_for_retry:82 - Sending text prompt to Gemini for retry (from image_verifier)...
2025-05-24 14:19:55,883 - VisualChainApp - DEBUG - image_verifier.query_gemini_text_for_retry:84 - User part of prompt for Gemini text (verifier retry):
<retry_connection_request>
  <person1>Franklin D. Roosevelt</person1>
  <person2>Queen Elizabeth II</person2>
  <failed_link_instruction>
    IMPORTANT: Your previous suggestion for a co-occurrence between Franklin D. Roosevelt and Queen Elizabeth II (event: "Roosevelt and Queen Elizabeth II exchanged correspondence and had diplomatic relations during World War II.", query: ""Franklin D. Roosevelt" AND "Queen Elizabeth II" diplomatic correspondence") could NOT be visually verified or no images w
2025-05-24 14:20:12,890 - VisualChainApp - DEBUG - image_verifier.clean_gemini_xml_response_verifier:72 - Raw AI output before cleaning (verifier response) (first 300 chars): ```xml
<no_alternative_link_found reason="After extensive research across numerous historical databases, including diplomatic records, news archives (New York Times, Associated Press, Reuters, BBC), biographies of both Franklin D. Roosevelt and Queen Elizabeth II, and records of international events
2025-05-24 14:20:12,892 - VisualChainApp - DEBUG - image_verifier.clean_gemini_xml_response_verifier:79 - AI output after cleaning (verifier resp) (first 300 chars): <no_alternative_link_found reason="After extensive research across numerous historical databases, including diplomatic records, news archives (New York Times, Associated Press, Reuters, BBC), biographies of both Franklin D. Roosevelt and Queen Elizabeth II, and records of international events during
2025-05-24 14:20:12,892 - VisualChainApp - DEBUG - image_verifier.query_gemini_text_for_retry:89 - Cleaned Gemini response from text query (verifier retry): <no_alternative_link_found reason="After extensive research across numerous historical databases, including diplomatic records, news archives (New York Times, Associated Press, Reuters, BBC), biographies of both Franklin D. Roosevelt and Queen Elizabeth II, and records of international events during
2025-05-24 14:20:12,895 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:412 -   Gemini indicated no alternative link found (reprompt after verification failure): After extensive research across numerous historical databases, including diplomatic records, news archives (New York Times, Associated Press, Reuters, BBC), biographies of both Franklin D. Roosevelt and Queen Elizabeth II, and records of international events during World War II and the post-war era, no verifiable evidence of a direct meeting or co-occurrence between them has been found that would plausibly yield photographic or filmed evidence.  While correspondence and diplomatic relations existed, these lack the visual context required.  The geographical distance and the differing timelines of their prominent public engagements further constrain the possibility of a shared event that could be visually documented.  The search included exploring potential intermediaries like high-ranking officials involved in wartime diplomacy or members of their respective courts, but no conclusive evidence of a shared, photograph-worthy event emerged even after exploring a significant range of possible connections and intermediary paths.
2025-05-24 14:20:12,896 - VisualChainApp - WARNING - main_orchestrator.main:325 -   Segment 'Franklin D. Roosevelt' → 'Queen Elizabeth II' failed verification (status from verifier: FAILED_VERIFICATION_NO_ALTERNATIVE).
2025-05-24 14:20:12,896 - VisualChainApp - INFO - main_orchestrator.main:344 -   Attempting orchestrator-level sub-chain re-generation from 'Franklin D. Roosevelt' to 'James Charles'.
2025-05-24 14:20:12,896 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:112 - Attempting to extract persons from subjects_text: 'Winston Churchill → Franklin D. Roosevelt'
2025-05-24 14:20:12,896 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:128 - Extracted P1: 'Winston Churchill', P2: 'Franklin D. Roosevelt'
2025-05-24 14:20:12,896 - VisualChainApp - INFO - main_orchestrator.main:354 -     Orchestrator sub-chain attempt 1/3 from 'Franklin D. Roosevelt' to 'James Charles'
2025-05-24 14:20:12,897 - VisualChainApp - DEBUG - main_orchestrator.main:385 -     Sub-chain exclusion instruction: IMPORTANT: You are building a new sub-chain from 'Franklin D. Roosevelt' to 'James Charles'.
1. Crucially, DO NOT suggest 'Queen Elizabeth II' as the immediate next connection from 'Franklin D. Roosevelt'. That path just failed.
2. If possible, also try to AVOID using any of these people as *new intermediaries* in this sub-chain, as they are already part of the path leading to 'Franklin D. Roosevelt': ['Winston Churchill']. Focus on new, previously unused intermediaries.

3. The goal is to find a NEW, fresh path from 'Franklin D. Roosevelt' to 'James Charles'.
2025-05-24 14:20:12,897 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain:110 - Requesting chain: Franklin D. Roosevelt -> ... -> James Charles.
2025-05-24 14:20:12,897 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain:112 - With exclusion instruction: IMPORTANT: You are building a new sub-chain from 'Franklin D. Roosevelt' to 'James Charles'.
1. Crucially, DO NOT suggest 'Queen Elizabeth II' as the immediate next connection from 'Franklin D. Roosevelt'. That path just failed.
2. If possible, also try to AVOID using any of these people as *new intermediaries* in this sub-chain, as they are already part of the path leading to 'Franklin D. Roosevelt': ['Winston Churchill']. Focus on new, previously unused intermediaries.

3. The goal is to find a NEW, fresh path from 'Franklin D. Roosevelt' to 'James Charles'.
2025-05-24 14:20:12,898 - VisualChainApp - INFO - initial_gemini_query._load_gemini_task_header:13 - Gemini task header loaded from prompts/gemini_task_header.txt
2025-05-24 14:20:12,899 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:50 - Querying Gemini with pre-formatted user input for a chain.
2025-05-24 14:20:12,902 - VisualChainApp - DEBUG - initial_gemini_query.get_initial_chain_from_gemini_direct:73 - User input XML for Gemini (part of full prompt):
## Task Execution
Now, using the rules, input format, and output formats defined above, please process the following connection request to find a full chain:<connection_request>
  <person1>Franklin D. Roosevelt</person1>
  <person2>James Charles</person2>
  <additional_instructions>IMPORTANT: You ar
... (user input snippet) ...
'Winston Churchill']. Focus on new, previously unused intermediaries.

3. The goal is to find a NEW, fresh path from 'Franklin D. Roosevelt' to 'James Charles'.</additional_instructions> 
  <!-- This will be empty for the first call, or contain exclusion for sub-chain calls -->
</connection_request>
2025-05-24 14:20:12,902 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:74 - --- Sending to Gemini (initial_gemini_query.get_initial_chain_from_gemini_direct) ---
2025-05-24 14:20:18,480 - VisualChainApp - DEBUG - initial_gemini_query.clean_gemini_xml_response:26 - Raw AI output before cleaning (first 300 chars): ```xml
<connection_chain>
  <chain_summary>
    <total_links>3</total_links>
    <subjects_connected>Franklin D. Roosevelt →  Eleanor Roosevelt → Oprah Winfrey → James Charles</subjects_connected>
    <chain_type>Extended</chain_type>
    <intermediary_count>2</intermediary_count>
    <research_conf
2025-05-24 14:20:18,481 - VisualChainApp - DEBUG - initial_gemini_query.clean_gemini_xml_response:46 - AI output after cleaning (first 300 chars): <connection_chain>
  <chain_summary>
    <total_links>3</total_links>
    <subjects_connected>Franklin D. Roosevelt →  Eleanor Roosevelt → Oprah Winfrey → James Charles</subjects_connected>
    <chain_type>Extended</chain_type>
    <intermediary_count>2</intermediary_count>
    <research_confidence>
2025-05-24 14:20:18,481 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:92 - Gemini response parsed as XML (root tag: connection_chain).
2025-05-24 14:20:18,482 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:98 - Received response from Gemini.
2025-05-24 14:20:18,484 - VisualChainApp - INFO - main_orchestrator.main:396 -     Sub-chain attempt output saved to output/temp_files/sub_chain_attempt_Franklin_D._Roosevelt_to_James_Charles_1.xml
2025-05-24 14:20:18,485 - VisualChainApp - INFO - main_orchestrator.main:410 -     Successfully got new sub-chain from 'Franklin D. Roosevelt' with 3 link(s). Replacing rest of old chain.
2025-05-24 14:20:18,485 - VisualChainApp - INFO - main_orchestrator.main:256 - --- Processing Link 2/4 (Overall) ---
2025-05-24 14:20:18,485 - VisualChainApp - DEBUG - main_orchestrator.main:257 - Current link to process XML: <link id="1">
    <subjects>Franklin D. Roosevelt → Eleanor Roosevelt</subjects>
    <evidence>Eleanor Roosevelt was the wife of Franklin D. Roosevelt and frequently appeared alongside him at public events and in official photographs.</evidence>
    <source>Numerous historical archives and biographi
2025-05-24 14:20:18,485 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:112 - Attempting to extract persons from subjects_text: 'Franklin D. Roosevelt → Eleanor Roosevelt'
2025-05-24 14:20:18,486 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:128 - Extracted P1: 'Franklin D. Roosevelt', P2: 'Eleanor Roosevelt'
2025-05-24 14:20:18,486 - VisualChainApp - INFO - main_orchestrator.main:269 -   Attempting segment: 'Franklin D. Roosevelt' → 'Eleanor Roosevelt'
2025-05-24 14:20:18,486 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:22 - Preparing to download images. Target: 'Franklin D. Roosevelt → Eleanor Roosevelt', Query: '"Franklin D. Roosevelt" AND "Eleanor Roosevelt"', Num: 5, Reference: False
2025-05-24 14:20:18,487 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:43 - Created image download folder: output/connection_chain_images/Franklin_D._Roosevelt_Eleanor_Roosevelt
2025-05-24 14:20:18,487 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:50 -   Saving up to 5 images to: output/connection_chain_images/Franklin_D._Roosevelt_Eleanor_Roosevelt for query: '"Franklin D. Roosevelt" AND "Eleanor Roosevelt"'
2025-05-24 14:20:18,490 - VisualChainApp - DEBUG - image_downloader.fetch_images_for_link:62 - Starting icrawler.crawl for: "Franklin D. Roosevelt" AND "Eleanor Roosevelt" (max_num=5)
2025-05-24 14:20:21,521 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:70 -   Finished icrawler.crawl for 'Franklin D. Roosevelt → Eleanor Roosevelt'.
2025-05-24 14:20:21,522 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:79 -   Found 5 image files in output/connection_chain_images/Franklin_D._Roosevelt_Eleanor_Roosevelt after crawl attempt.
2025-05-24 14:20:21,523 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:363 - --- Verifying link segment: 'Franklin D. Roosevelt' <-> 'Eleanor Roosevelt' (using DeepFace Multi-Model) ---
2025-05-24 14:20:21,523 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:386 -   Found 5 images in 'output/connection_chain_images/Franklin_D._Roosevelt_Eleanor_Roosevelt'. Will check up to 3 with DeepFace Multi-Model.
2025-05-24 14:20:21,523 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:206 -   Verifying image: 000004.jpg for 'Franklin D. Roosevelt' and 'Eleanor Roosevelt' using DeepFace (multiple models: ArcFace, VGG-Face, Facenet).
2025-05-24 14:20:21,523 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Franklin D. Roosevelt (target count: 5)
2025-05-24 14:20:21,524 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Franklin D. Roosevelt' in reference_faces/Franklin_D._Roosevelt.
2025-05-24 14:20:21,524 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Franklin D. Roosevelt'. Using top 5.
2025-05-24 14:20:21,524 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Eleanor Roosevelt (target count: 5)
2025-05-24 14:20:21,525 - VisualChainApp - INFO - image_verifier._ensure_reference_folder:111 - Created reference folder for Eleanor Roosevelt: reference_faces/Eleanor_Roosevelt
2025-05-24 14:20:21,525 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 0 existing reference(s) for 'Eleanor Roosevelt' in reference_faces/Eleanor_Roosevelt.
2025-05-24 14:20:21,525 - VisualChainApp - INFO - image_verifier.find_reference_image:179 - Need 5 more reference images for 'Eleanor Roosevelt'. Triggering download.
2025-05-24 14:20:21,526 - VisualChainApp - INFO - image_verifier._load_reference_query_patterns:61 - Loaded 5 reference image query patterns from prompts/reference_image_query_patterns.txt
2025-05-24 14:20:21,526 - VisualChainApp - INFO - image_verifier._download_additional_reference_images:137 - Attempting download of 5 additional reference image(s) for Eleanor Roosevelt into reference_faces/Eleanor_Roosevelt.
2025-05-24 14:20:21,526 - VisualChainApp - INFO - image_verifier._download_additional_reference_images:142 - Using diversified reference query for Eleanor Roosevelt: "Eleanor Roosevelt" clear face photo OR "Eleanor Roosevelt" profile face photo OR "Eleanor Roosevelt" 3/4 face view OR "Eleanor Roosevelt" headshot OR "Eleanor Roosevelt" official photo
2025-05-24 14:20:21,527 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:22 - Preparing to download images. Target: 'Eleanor Roosevelt', Query: '"Eleanor Roosevelt" clear face photo OR "Eleanor Roosevelt" profile face photo OR "Eleanor Roosevelt" 3/4 face view OR "Eleanor Roosevelt" headshot OR "Eleanor Roosevelt" official photo', Num: 5, Reference: True
2025-05-24 14:20:21,527 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:50 -   Saving up to 5 images to: reference_faces/Eleanor_Roosevelt for query: '"Eleanor Roosevelt" clear face photo OR "Eleanor Roosevelt" profile face photo OR "Eleanor Roosevelt" 3/4 face view OR "Eleanor Roosevelt" headshot OR "Eleanor Roosevelt" official photo'
2025-05-24 14:20:21,528 - VisualChainApp - DEBUG - image_downloader.fetch_images_for_link:62 - Starting icrawler.crawl for: "Eleanor Roosevelt" clear face photo OR "Eleanor Roosevelt" profile face photo OR "Eleanor Roosevelt" 3/4 face view OR "Eleanor Roosevelt" headshot OR "Eleanor Roosevelt" official photo (max_num=5)
2025-05-24 14:20:24,550 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:70 -   Finished icrawler.crawl for 'reference for Eleanor Roosevelt'.
2025-05-24 14:20:24,551 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:79 -   Found 5 image files in reference_faces/Eleanor_Roosevelt after crawl attempt.
2025-05-24 14:20:24,551 - VisualChainApp - INFO - image_verifier._download_additional_reference_images:154 - Download process potentially added images for Eleanor Roosevelt. Folder: reference_faces/Eleanor_Roosevelt.
2025-05-24 14:20:27,562 - VisualChainApp - INFO - image_verifier.find_reference_image:190 - Found 5 total reference(s) for 'Eleanor Roosevelt' after download attempt.
2025-05-24 14:20:27,563 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:224 -   DeepFace: Verifying P1 'Franklin D. Roosevelt' using 5 reference image(s) across 3 model(s).
2025-05-24 14:20:27,563 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 1/3: 'ArcFace'
2025-05-24 14:20:27,563 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.68 for model 'ArcFace' with metric 'cosine'.
2025-05-24 14:20:27,563 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:20:32,257 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:268 -       P1 verification with ArcFace SUCCEEDED (Ref: '000001.jpg') (Dist: 0.5912, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:20:32,258 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'ArcFace': VERIFIED
2025-05-24 14:20:32,258 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 2/3: 'VGG-Face'
2025-05-24 14:20:32,258 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.45 for model 'VGG-Face' with metric 'cosine'.
2025-05-24 14:20:32,258 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:20:37,157 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.6154, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:20:37,157 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:20:41,077 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.4808, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:20:41,078 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 3/5): 000004.jpg vs 000003.jpg
2025-05-24 14:20:45,659 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.7756, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:20:45,659 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 4/5): 000004.jpg vs 000004.jpg
2025-05-24 14:20:49,789 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.6848, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:20:49,790 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 5/5): 000004.jpg vs 000005.jpg
2025-05-24 14:20:53,592 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.7277, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:20:53,592 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:20:53,592 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 3/3: 'Facenet'
2025-05-24 14:20:53,592 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.4 for model 'Facenet' with metric 'cosine'.
2025-05-24 14:20:53,592 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:20:58,567 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:268 -       P1 verification with Facenet SUCCEEDED (Ref: '000001.jpg') (Dist: 0.3734, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:20:58,568 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'Facenet': VERIFIED
2025-05-24 14:20:58,568 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:280 -   DeepFace P1 'Franklin D. Roosevelt' Voting: 2/3 models voted YES. Final P1 Verified: True (Threshold: >50%)
2025-05-24 14:20:58,568 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:285 -   DeepFace: P1 'Franklin D. Roosevelt' verified by vote. Verifying P2 'Eleanor Roosevelt' using 5 reference image(s) across 3 model(s).
2025-05-24 14:20:58,569 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:287 -     P2 Model 1/3: 'ArcFace'
2025-05-24 14:20:58,569 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:21:02,650 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:326 -       P2 verification with ArcFace SUCCEEDED (Ref: '000001.jpg') (Dist: 0.5845, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:21:02,650 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:334 -     P2 Result for model 'ArcFace': VERIFIED
2025-05-24 14:21:02,650 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:287 -     P2 Model 2/3: 'VGG-Face'
2025-05-24 14:21:02,650 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:21:06,967 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.6891, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:21:06,967 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:21:10,887 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.7133, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:21:10,887 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 3/5): 000004.jpg vs 000003.jpg
2025-05-24 14:21:15,653 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.5659, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:21:15,654 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 4/5): 000004.jpg vs 000004.jpg
2025-05-24 14:21:19,782 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.6482, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:21:19,783 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 5/5): 000004.jpg vs 000005.jpg
2025-05-24 14:21:24,337 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.8687, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:21:24,338 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:334 -     P2 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:21:24,338 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:287 -     P2 Model 3/3: 'Facenet'
2025-05-24 14:21:24,338 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:21:29,180 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:326 -       P2 verification with Facenet SUCCEEDED (Ref: '000001.jpg') (Dist: 0.2988, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:21:29,181 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:334 -     P2 Result for model 'Facenet': VERIFIED
2025-05-24 14:21:29,181 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:338 -   DeepFace P2 'Eleanor Roosevelt' Voting: 2/3 models voted YES. Final P2 Verified: True (Threshold: >50%)
2025-05-24 14:21:29,181 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:343 -   DeepFace Multi-Model Verification: Both Franklin D. Roosevelt and Eleanor Roosevelt successfully verified by vote in 000004.jpg.
2025-05-24 14:21:29,181 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:394 -   SUCCESS: Verified 'Franklin D. Roosevelt' and 'Eleanor Roosevelt' in 000004.jpg using DeepFace Multi-Model
2025-05-24 14:21:29,181 - VisualChainApp - INFO - main_orchestrator.main:294 -   SUCCESS: Segment 'Franklin D. Roosevelt' → 'Eleanor Roosevelt' verified with image: output/connection_chain_images/Franklin_D._Roosevelt_Eleanor_Roosevelt/000004.jpg
2025-05-24 14:21:29,187 - VisualChainApp - INFO - main_orchestrator.main:312 -   Copied verified image to: output/connection_chain_images_verified/02_Franklin_D._Roosevelt_vs_Eleanor_Roosevelt.jpg
2025-05-24 14:21:29,187 - VisualChainApp - INFO - main_orchestrator.main:256 - --- Processing Link 3/4 (Overall) ---
2025-05-24 14:21:29,187 - VisualChainApp - DEBUG - main_orchestrator.main:257 - Current link to process XML: <link id="2">
    <subjects>Eleanor Roosevelt → Oprah Winfrey</subjects>
    <evidence>While a direct co-occurrence is not readily documented, both Eleanor Roosevelt and Oprah Winfrey are highly influential figures in American history and culture, with Oprah likely having mentioned or featured Elean
2025-05-24 14:21:29,187 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:112 - Attempting to extract persons from subjects_text: 'Eleanor Roosevelt → Oprah Winfrey'
2025-05-24 14:21:29,187 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:128 - Extracted P1: 'Eleanor Roosevelt', P2: 'Oprah Winfrey'
2025-05-24 14:21:29,187 - VisualChainApp - INFO - main_orchestrator.main:269 -   Attempting segment: 'Eleanor Roosevelt' → 'Oprah Winfrey'
2025-05-24 14:21:29,187 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:22 - Preparing to download images. Target: 'Eleanor Roosevelt → Oprah Winfrey', Query: '"Eleanor Roosevelt" AND "Oprah Winfrey"', Num: 5, Reference: False
2025-05-24 14:21:29,187 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:43 - Created image download folder: output/connection_chain_images/Eleanor_Roosevelt_Oprah_Winfrey
2025-05-24 14:21:29,187 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:50 -   Saving up to 5 images to: output/connection_chain_images/Eleanor_Roosevelt_Oprah_Winfrey for query: '"Eleanor Roosevelt" AND "Oprah Winfrey"'
2025-05-24 14:21:29,189 - VisualChainApp - DEBUG - image_downloader.fetch_images_for_link:62 - Starting icrawler.crawl for: "Eleanor Roosevelt" AND "Oprah Winfrey" (max_num=5)
2025-05-24 14:21:32,222 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:70 -   Finished icrawler.crawl for 'Eleanor Roosevelt → Oprah Winfrey'.
2025-05-24 14:21:32,223 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:79 -   Found 5 image files in output/connection_chain_images/Eleanor_Roosevelt_Oprah_Winfrey after crawl attempt.
2025-05-24 14:21:32,223 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:363 - --- Verifying link segment: 'Eleanor Roosevelt' <-> 'Oprah Winfrey' (using DeepFace Multi-Model) ---
2025-05-24 14:21:32,223 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:386 -   Found 5 images in 'output/connection_chain_images/Eleanor_Roosevelt_Oprah_Winfrey'. Will check up to 3 with DeepFace Multi-Model.
2025-05-24 14:21:32,224 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:206 -   Verifying image: 000004.jpg for 'Eleanor Roosevelt' and 'Oprah Winfrey' using DeepFace (multiple models: ArcFace, VGG-Face, Facenet).
2025-05-24 14:21:32,224 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Eleanor Roosevelt (target count: 5)
2025-05-24 14:21:32,224 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Eleanor Roosevelt' in reference_faces/Eleanor_Roosevelt.
2025-05-24 14:21:32,224 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Eleanor Roosevelt'. Using top 5.
2025-05-24 14:21:32,224 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Oprah Winfrey (target count: 5)
2025-05-24 14:21:32,225 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Oprah Winfrey' in reference_faces/Oprah_Winfrey.
2025-05-24 14:21:32,226 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Oprah Winfrey'. Using top 5.
2025-05-24 14:21:32,226 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:224 -   DeepFace: Verifying P1 'Eleanor Roosevelt' using 5 reference image(s) across 3 model(s).
2025-05-24 14:21:32,226 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 1/3: 'ArcFace'
2025-05-24 14:21:32,226 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.68 for model 'ArcFace' with metric 'cosine'.
2025-05-24 14:21:32,226 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:21:35,743 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000001.jpg') (Dist: 0.8733, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:21:35,743 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:21:39,021 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000002.jpg') (Dist: 0.8340, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:21:39,022 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 3/5): 000004.jpg vs 000003.jpg
2025-05-24 14:21:43,350 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000003.jpg') (Dist: 0.8957, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:21:43,350 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 4/5): 000004.jpg vs 000004.jpg
2025-05-24 14:21:46,703 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000004.jpg') (Dist: 0.8555, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:21:46,703 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 5/5): 000004.jpg vs 000005.jpg
2025-05-24 14:21:50,589 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000005.jpg') (Dist: 0.9978, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:21:50,589 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'ArcFace': NOT VERIFIED
2025-05-24 14:21:50,589 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 2/3: 'VGG-Face'
2025-05-24 14:21:50,589 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.45 for model 'VGG-Face' with metric 'cosine'.
2025-05-24 14:21:50,589 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:21:54,389 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.8742, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:21:54,390 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:21:57,648 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.7758, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:21:57,648 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 3/5): 000004.jpg vs 000003.jpg
2025-05-24 14:22:01,951 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.8643, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:22:01,952 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 4/5): 000004.jpg vs 000004.jpg
2025-05-24 14:22:05,490 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.8727, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:22:05,491 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 5/5): 000004.jpg vs 000005.jpg
2025-05-24 14:22:09,540 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.9142, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:22:09,541 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:22:09,541 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 3/3: 'Facenet'
2025-05-24 14:22:09,541 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.4 for model 'Facenet' with metric 'cosine'.
2025-05-24 14:22:09,541 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:22:13,260 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000001.jpg') (Dist: 0.9942, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:22:13,260 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:22:16,411 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000002.jpg') (Dist: 0.9805, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:22:16,411 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 3/5): 000004.jpg vs 000003.jpg
2025-05-24 14:22:20,718 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000003.jpg') (Dist: 0.9159, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:22:20,719 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 4/5): 000004.jpg vs 000004.jpg
2025-05-24 14:22:24,155 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000004.jpg') (Dist: 0.8236, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:22:24,155 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 5/5): 000004.jpg vs 000005.jpg
2025-05-24 14:22:28,027 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000005.jpg') (Dist: 0.9363, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:22:28,028 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'Facenet': NOT VERIFIED
2025-05-24 14:22:28,028 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:280 -   DeepFace P1 'Eleanor Roosevelt' Voting: 0/3 models voted YES. Final P1 Verified: False (Threshold: >50%)
2025-05-24 14:22:28,028 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:340 -   DeepFace: Skipping P2 'Oprah Winfrey' check as P1 'Eleanor Roosevelt' was not verified by vote.
2025-05-24 14:22:28,028 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:346 -   DeepFace Multi-Model Verification: One or both not verified by vote. P1_verified: False, P2_verified: False
2025-05-24 14:22:28,028 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:206 -   Verifying image: 000005.jpg for 'Eleanor Roosevelt' and 'Oprah Winfrey' using DeepFace (multiple models: ArcFace, VGG-Face, Facenet).
2025-05-24 14:22:28,028 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Eleanor Roosevelt (target count: 5)
2025-05-24 14:22:28,029 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Eleanor Roosevelt' in reference_faces/Eleanor_Roosevelt.
2025-05-24 14:22:28,029 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Eleanor Roosevelt'. Using top 5.
2025-05-24 14:22:28,029 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Oprah Winfrey (target count: 5)
2025-05-24 14:22:28,029 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Oprah Winfrey' in reference_faces/Oprah_Winfrey.
2025-05-24 14:22:28,029 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Oprah Winfrey'. Using top 5.
2025-05-24 14:22:28,029 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:224 -   DeepFace: Verifying P1 'Eleanor Roosevelt' using 5 reference image(s) across 3 model(s).
2025-05-24 14:22:28,029 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 1/3: 'ArcFace'
2025-05-24 14:22:28,029 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.68 for model 'ArcFace' with metric 'cosine'.
2025-05-24 14:22:28,029 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 1/5): 000005.jpg vs 000001.jpg
2025-05-24 14:22:31,568 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000001.jpg') (Dist: 0.7272, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:22:31,569 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 2/5): 000005.jpg vs 000002.jpg
2025-05-24 14:22:34,610 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000002.jpg') (Dist: 0.7456, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:22:34,610 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 3/5): 000005.jpg vs 000003.jpg
2025-05-24 14:22:38,706 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000003.jpg') (Dist: 0.7002, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:22:38,706 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 4/5): 000005.jpg vs 000004.jpg
2025-05-24 14:22:41,995 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000004.jpg') (Dist: 0.7477, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:22:41,995 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 5/5): 000005.jpg vs 000005.jpg
2025-05-24 14:22:45,754 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000005.jpg') (Dist: 0.8230, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:22:45,754 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'ArcFace': NOT VERIFIED
2025-05-24 14:22:45,754 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 2/3: 'VGG-Face'
2025-05-24 14:22:45,754 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.45 for model 'VGG-Face' with metric 'cosine'.
2025-05-24 14:22:45,755 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 1/5): 000005.jpg vs 000001.jpg
2025-05-24 14:22:49,586 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.7271, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:22:49,587 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 2/5): 000005.jpg vs 000002.jpg
2025-05-24 14:22:52,728 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.7527, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:22:52,729 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 3/5): 000005.jpg vs 000003.jpg
2025-05-24 14:22:56,930 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.6653, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:22:56,930 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 4/5): 000005.jpg vs 000004.jpg
2025-05-24 14:23:00,340 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.8687, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:23:00,340 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 5/5): 000005.jpg vs 000005.jpg
2025-05-24 14:23:04,182 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.9079, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:23:04,182 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:23:04,182 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 3/3: 'Facenet'
2025-05-24 14:23:04,182 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.4 for model 'Facenet' with metric 'cosine'.
2025-05-24 14:23:04,182 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 1/5): 000005.jpg vs 000001.jpg
2025-05-24 14:23:07,753 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000001.jpg') (Dist: 0.4921, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:23:07,753 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 2/5): 000005.jpg vs 000002.jpg
2025-05-24 14:23:10,866 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000002.jpg') (Dist: 0.4373, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:23:10,866 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 3/5): 000005.jpg vs 000003.jpg
2025-05-24 14:23:15,060 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000003.jpg') (Dist: 0.4958, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:23:15,060 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 4/5): 000005.jpg vs 000004.jpg
2025-05-24 14:23:18,382 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000004.jpg') (Dist: 0.7647, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:23:18,382 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 5/5): 000005.jpg vs 000005.jpg
2025-05-24 14:23:22,221 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000005.jpg') (Dist: 1.0312, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:23:22,221 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'Facenet': NOT VERIFIED
2025-05-24 14:23:22,221 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:280 -   DeepFace P1 'Eleanor Roosevelt' Voting: 0/3 models voted YES. Final P1 Verified: False (Threshold: >50%)
2025-05-24 14:23:22,221 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:340 -   DeepFace: Skipping P2 'Oprah Winfrey' check as P1 'Eleanor Roosevelt' was not verified by vote.
2025-05-24 14:23:22,222 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:346 -   DeepFace Multi-Model Verification: One or both not verified by vote. P1_verified: False, P2_verified: False
2025-05-24 14:23:22,222 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:206 -   Verifying image: 000001.png for 'Eleanor Roosevelt' and 'Oprah Winfrey' using DeepFace (multiple models: ArcFace, VGG-Face, Facenet).
2025-05-24 14:23:22,222 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Eleanor Roosevelt (target count: 5)
2025-05-24 14:23:22,222 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Eleanor Roosevelt' in reference_faces/Eleanor_Roosevelt.
2025-05-24 14:23:22,222 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Eleanor Roosevelt'. Using top 5.
2025-05-24 14:23:22,222 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Oprah Winfrey (target count: 5)
2025-05-24 14:23:22,222 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Oprah Winfrey' in reference_faces/Oprah_Winfrey.
2025-05-24 14:23:22,222 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Oprah Winfrey'. Using top 5.
2025-05-24 14:23:22,222 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:224 -   DeepFace: Verifying P1 'Eleanor Roosevelt' using 5 reference image(s) across 3 model(s).
2025-05-24 14:23:22,222 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 1/3: 'ArcFace'
2025-05-24 14:23:22,222 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.68 for model 'ArcFace' with metric 'cosine'.
2025-05-24 14:23:22,223 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 1/5): 000001.png vs 000001.jpg
2025-05-24 14:23:27,331 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000001.jpg') (Dist: 0.7862, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:23:27,332 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 2/5): 000001.png vs 000002.jpg
2025-05-24 14:23:31,207 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000002.jpg') (Dist: 0.8542, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:23:31,208 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 3/5): 000001.png vs 000003.jpg
2025-05-24 14:23:36,155 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000003.jpg') (Dist: 0.8396, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:23:36,156 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 4/5): 000001.png vs 000004.jpg
2025-05-24 14:23:39,963 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000004.jpg') (Dist: 0.8466, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:23:39,964 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 5/5): 000001.png vs 000005.jpg
2025-05-24 14:23:45,155 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000005.jpg') (Dist: 0.9853, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:23:45,155 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'ArcFace': NOT VERIFIED
2025-05-24 14:23:45,155 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 2/3: 'VGG-Face'
2025-05-24 14:23:45,155 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.45 for model 'VGG-Face' with metric 'cosine'.
2025-05-24 14:23:45,155 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 1/5): 000001.png vs 000001.jpg
2025-05-24 14:23:50,963 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.8227, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:23:50,964 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 2/5): 000001.png vs 000002.jpg
2025-05-24 14:23:55,047 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.8588, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:23:55,047 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 3/5): 000001.png vs 000003.jpg
2025-05-24 14:24:00,108 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.7115, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:24:00,108 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 4/5): 000001.png vs 000004.jpg
2025-05-24 14:24:04,677 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.8739, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:24:04,677 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 5/5): 000001.png vs 000005.jpg
2025-05-24 14:24:09,435 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.9527, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:24:09,435 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:24:09,435 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 3/3: 'Facenet'
2025-05-24 14:24:09,435 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.4 for model 'Facenet' with metric 'cosine'.
2025-05-24 14:24:09,435 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 1/5): 000001.png vs 000001.jpg
2025-05-24 14:24:13,718 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000001.jpg') (Dist: 0.8600, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:24:13,718 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 2/5): 000001.png vs 000002.jpg
2025-05-24 14:24:17,458 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000002.jpg') (Dist: 0.6998, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:24:17,459 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 3/5): 000001.png vs 000003.jpg
2025-05-24 14:24:22,169 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000003.jpg') (Dist: 0.9301, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:24:22,170 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 4/5): 000001.png vs 000004.jpg
2025-05-24 14:24:25,996 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000004.jpg') (Dist: 0.8568, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:24:25,997 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 5/5): 000001.png vs 000005.jpg
2025-05-24 14:24:30,810 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000005.jpg') (Dist: 1.1245, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:24:30,810 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'Facenet': NOT VERIFIED
2025-05-24 14:24:30,811 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:280 -   DeepFace P1 'Eleanor Roosevelt' Voting: 0/3 models voted YES. Final P1 Verified: False (Threshold: >50%)
2025-05-24 14:24:30,811 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:340 -   DeepFace: Skipping P2 'Oprah Winfrey' check as P1 'Eleanor Roosevelt' was not verified by vote.
2025-05-24 14:24:30,811 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:346 -   DeepFace Multi-Model Verification: One or both not verified by vote. P1_verified: False, P2_verified: False
2025-05-24 14:24:30,811 - VisualChainApp - WARNING - image_verifier.verify_and_potentially_reprompt_link:402 -   Verification FAILED for all 3 checked images for 'Eleanor Roosevelt' and 'Oprah Winfrey' using DeepFace Multi-Model.
2025-05-24 14:24:30,811 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:406 -   Reprompting Gemini for an alternative link (due to image verification failure with DeepFace Multi-Model).
2025-05-24 14:24:30,811 - VisualChainApp - INFO - image_verifier.query_gemini_text_for_retry:82 - Sending text prompt to Gemini for retry (from image_verifier)...
2025-05-24 14:24:30,811 - VisualChainApp - DEBUG - image_verifier.query_gemini_text_for_retry:84 - User part of prompt for Gemini text (verifier retry):
<retry_connection_request>
  <person1>Eleanor Roosevelt</person1>
  <person2>Oprah Winfrey</person2>
  <failed_link_instruction>
    IMPORTANT: Your previous suggestion for a co-occurrence between Eleanor Roosevelt and Oprah Winfrey (event: "While a direct co-occurrence is not readily documented, both Eleanor Roosevelt and Oprah Winfrey are highly influential figures in American history and culture, with Oprah likely having mentioned or featured Eleanor Roosevelt in her work.", query: ""Eleanor 
2025-05-24 14:24:47,723 - VisualChainApp - DEBUG - image_verifier.clean_gemini_xml_response_verifier:72 - Raw AI output before cleaning (verifier response) (first 300 chars): ```xml
<no_alternative_link_found reason="After an exhaustive search of reputable historical archives, biographical works, and media databases, no documented co-occurrence between Eleanor Roosevelt and Oprah Winfrey could be found.  The temporal gap between their lives and the lack of overlapping pr
2025-05-24 14:24:47,724 - VisualChainApp - DEBUG - image_verifier.clean_gemini_xml_response_verifier:79 - AI output after cleaning (verifier resp) (first 300 chars): <no_alternative_link_found reason="After an exhaustive search of reputable historical archives, biographical works, and media databases, no documented co-occurrence between Eleanor Roosevelt and Oprah Winfrey could be found.  The temporal gap between their lives and the lack of overlapping professio
2025-05-24 14:24:47,725 - VisualChainApp - DEBUG - image_verifier.query_gemini_text_for_retry:89 - Cleaned Gemini response from text query (verifier retry): <no_alternative_link_found reason="After an exhaustive search of reputable historical archives, biographical works, and media databases, no documented co-occurrence between Eleanor Roosevelt and Oprah Winfrey could be found.  The temporal gap between their lives and the lack of overlapping professio
2025-05-24 14:24:47,726 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:412 -   Gemini indicated no alternative link found (reprompt after verification failure): After an exhaustive search of reputable historical archives, biographical works, and media databases, no documented co-occurrence between Eleanor Roosevelt and Oprah Winfrey could be found.  The temporal gap between their lives and the lack of overlapping professional or social circles make a direct connection extremely improbable.  Furthermore, even exploring potential intermediary figures (e.g., individuals who knew both or who have publicly discussed both) did not reveal any documented events where they were present together or where credible evidence suggests such a shared presence. The suggested previous link was based on the assumption of shared cultural influence, rather than a directly documented event, and failed visual verification.  No additional plausible links meeting the specified criteria can be identified.
2025-05-24 14:24:47,727 - VisualChainApp - WARNING - main_orchestrator.main:325 -   Segment 'Eleanor Roosevelt' → 'Oprah Winfrey' failed verification (status from verifier: FAILED_VERIFICATION_NO_ALTERNATIVE).
2025-05-24 14:24:47,727 - VisualChainApp - INFO - main_orchestrator.main:344 -   Attempting orchestrator-level sub-chain re-generation from 'Eleanor Roosevelt' to 'James Charles'.
2025-05-24 14:24:47,727 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:112 - Attempting to extract persons from subjects_text: 'Winston Churchill → Franklin D. Roosevelt'
2025-05-24 14:24:47,727 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:128 - Extracted P1: 'Winston Churchill', P2: 'Franklin D. Roosevelt'
2025-05-24 14:24:47,727 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:112 - Attempting to extract persons from subjects_text: 'Franklin D. Roosevelt → Eleanor Roosevelt'
2025-05-24 14:24:47,727 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:128 - Extracted P1: 'Franklin D. Roosevelt', P2: 'Eleanor Roosevelt'
2025-05-24 14:24:47,728 - VisualChainApp - INFO - main_orchestrator.main:354 -     Orchestrator sub-chain attempt 1/3 from 'Eleanor Roosevelt' to 'James Charles'
2025-05-24 14:24:47,728 - VisualChainApp - DEBUG - main_orchestrator.main:385 -     Sub-chain exclusion instruction: IMPORTANT: You are building a new sub-chain from 'Eleanor Roosevelt' to 'James Charles'.
1. Crucially, DO NOT suggest 'Oprah Winfrey' as the immediate next connection from 'Eleanor Roosevelt'. That path just failed.
2. If possible, also try to AVOID using any of these people as *new intermediaries* in this sub-chain, as they are already part of the path leading to 'Eleanor Roosevelt': ['Winston Churchill', 'Franklin D. Roosevelt']. Focus on new, previously unused intermediaries.

3. The goal is to find a NEW, fresh path from 'Eleanor Roosevelt' to 'James Charles'.
2025-05-24 14:24:47,728 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain:110 - Requesting chain: Eleanor Roosevelt -> ... -> James Charles.
2025-05-24 14:24:47,729 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain:112 - With exclusion instruction: IMPORTANT: You are building a new sub-chain from 'Eleanor Roosevelt' to 'James Charles'.
1. Crucially, DO NOT suggest 'Oprah Winfrey' as the immediate next connection from 'Eleanor Roosevelt'. That path just failed.
2. If possible, also try to AVOID using any of these people as *new intermediaries* in this sub-chain, as they are already part of the path leading to 'Eleanor Roosevelt': ['Winston Churchill', 'Franklin D. Roosevelt']. Focus on new, previously unused intermediaries.

3. The goal is to find a NEW, fresh path from 'Eleanor Roosevelt' to 'James Charles'.
2025-05-24 14:24:47,734 - VisualChainApp - INFO - initial_gemini_query._load_gemini_task_header:13 - Gemini task header loaded from prompts/gemini_task_header.txt
2025-05-24 14:24:47,734 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:50 - Querying Gemini with pre-formatted user input for a chain.
2025-05-24 14:24:47,738 - VisualChainApp - DEBUG - initial_gemini_query.get_initial_chain_from_gemini_direct:73 - User input XML for Gemini (part of full prompt):
## Task Execution
Now, using the rules, input format, and output formats defined above, please process the following connection request to find a full chain:<connection_request>
  <person1>Eleanor Roosevelt</person1>
  <person2>James Charles</person2>
  <additional_instructions>IMPORTANT: You are bu
... (user input snippet) ...
'Franklin D. Roosevelt']. Focus on new, previously unused intermediaries.

3. The goal is to find a NEW, fresh path from 'Eleanor Roosevelt' to 'James Charles'.</additional_instructions> 
  <!-- This will be empty for the first call, or contain exclusion for sub-chain calls -->
</connection_request>
2025-05-24 14:24:47,738 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:74 - --- Sending to Gemini (initial_gemini_query.get_initial_chain_from_gemini_direct) ---
2025-05-24 14:24:54,735 - VisualChainApp - DEBUG - initial_gemini_query.clean_gemini_xml_response:26 - Raw AI output before cleaning (first 300 chars): ```xml
<connection_chain>
  <chain_summary>
    <total_links>3</total_links>
    <subjects_connected>Eleanor Roosevelt →  Lady Bird Johnson →  Oprah Winfrey → James Charles</subjects_connected>
    <chain_type>Extended</chain_type>
    <intermediary_count>2</intermediary_count>
    <research_confide
2025-05-24 14:24:54,737 - VisualChainApp - DEBUG - initial_gemini_query.clean_gemini_xml_response:46 - AI output after cleaning (first 300 chars): <connection_chain>
  <chain_summary>
    <total_links>3</total_links>
    <subjects_connected>Eleanor Roosevelt →  Lady Bird Johnson →  Oprah Winfrey → James Charles</subjects_connected>
    <chain_type>Extended</chain_type>
    <intermediary_count>2</intermediary_count>
    <research_confidence>Med
2025-05-24 14:24:54,737 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:92 - Gemini response parsed as XML (root tag: connection_chain).
2025-05-24 14:24:54,737 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:98 - Received response from Gemini.
2025-05-24 14:24:54,740 - VisualChainApp - INFO - main_orchestrator.main:396 -     Sub-chain attempt output saved to output/temp_files/sub_chain_attempt_Eleanor_Roosevelt_to_James_Charles_1.xml
2025-05-24 14:24:54,740 - VisualChainApp - INFO - main_orchestrator.main:410 -     Successfully got new sub-chain from 'Eleanor Roosevelt' with 3 link(s). Replacing rest of old chain.
2025-05-24 14:24:54,741 - VisualChainApp - INFO - main_orchestrator.main:256 - --- Processing Link 3/5 (Overall) ---
2025-05-24 14:24:54,741 - VisualChainApp - DEBUG - main_orchestrator.main:257 - Current link to process XML: <link id="1">
    <subjects>Eleanor Roosevelt → Lady Bird Johnson</subjects>
    <evidence>Both were First Ladies of the United States, and participated in various White House events and social functions, often documented in photographs and newsreels of the era.</evidence>
    <source>Various archiv
2025-05-24 14:24:54,741 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:112 - Attempting to extract persons from subjects_text: 'Eleanor Roosevelt → Lady Bird Johnson'
2025-05-24 14:24:54,741 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:128 - Extracted P1: 'Eleanor Roosevelt', P2: 'Lady Bird Johnson'
2025-05-24 14:24:54,741 - VisualChainApp - INFO - main_orchestrator.main:269 -   Attempting segment: 'Eleanor Roosevelt' → 'Lady Bird Johnson'
2025-05-24 14:24:54,742 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:22 - Preparing to download images. Target: 'Eleanor Roosevelt → Lady Bird Johnson', Query: '"Eleanor Roosevelt" AND "Lady Bird Johnson" AND "White House events"', Num: 5, Reference: False
2025-05-24 14:24:54,742 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:43 - Created image download folder: output/connection_chain_images/Eleanor_Roosevelt_Lady_Bird_Johnson
2025-05-24 14:24:54,743 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:50 -   Saving up to 5 images to: output/connection_chain_images/Eleanor_Roosevelt_Lady_Bird_Johnson for query: '"Eleanor Roosevelt" AND "Lady Bird Johnson" AND "White House events"'
2025-05-24 14:24:54,745 - VisualChainApp - DEBUG - image_downloader.fetch_images_for_link:62 - Starting icrawler.crawl for: "Eleanor Roosevelt" AND "Lady Bird Johnson" AND "White House events" (max_num=5)
2025-05-24 14:24:56,762 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:70 -   Finished icrawler.crawl for 'Eleanor Roosevelt → Lady Bird Johnson'.
2025-05-24 14:24:56,763 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:79 -   Found 5 image files in output/connection_chain_images/Eleanor_Roosevelt_Lady_Bird_Johnson after crawl attempt.
2025-05-24 14:24:56,763 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:363 - --- Verifying link segment: 'Eleanor Roosevelt' <-> 'Lady Bird Johnson' (using DeepFace Multi-Model) ---
2025-05-24 14:24:56,764 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:386 -   Found 5 images in 'output/connection_chain_images/Eleanor_Roosevelt_Lady_Bird_Johnson'. Will check up to 3 with DeepFace Multi-Model.
2025-05-24 14:24:56,764 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:206 -   Verifying image: 000004.jpg for 'Eleanor Roosevelt' and 'Lady Bird Johnson' using DeepFace (multiple models: ArcFace, VGG-Face, Facenet).
2025-05-24 14:24:56,764 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Eleanor Roosevelt (target count: 5)
2025-05-24 14:24:56,765 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Eleanor Roosevelt' in reference_faces/Eleanor_Roosevelt.
2025-05-24 14:24:56,765 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Eleanor Roosevelt'. Using top 5.
2025-05-24 14:24:56,765 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Lady Bird Johnson (target count: 5)
2025-05-24 14:24:56,766 - VisualChainApp - INFO - image_verifier._ensure_reference_folder:111 - Created reference folder for Lady Bird Johnson: reference_faces/Lady_Bird_Johnson
2025-05-24 14:24:56,766 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 0 existing reference(s) for 'Lady Bird Johnson' in reference_faces/Lady_Bird_Johnson.
2025-05-24 14:24:56,766 - VisualChainApp - INFO - image_verifier.find_reference_image:179 - Need 5 more reference images for 'Lady Bird Johnson'. Triggering download.
2025-05-24 14:24:56,769 - VisualChainApp - INFO - image_verifier._load_reference_query_patterns:61 - Loaded 5 reference image query patterns from prompts/reference_image_query_patterns.txt
2025-05-24 14:24:56,769 - VisualChainApp - INFO - image_verifier._download_additional_reference_images:137 - Attempting download of 5 additional reference image(s) for Lady Bird Johnson into reference_faces/Lady_Bird_Johnson.
2025-05-24 14:24:56,770 - VisualChainApp - INFO - image_verifier._download_additional_reference_images:142 - Using diversified reference query for Lady Bird Johnson: "Lady Bird Johnson" clear face photo OR "Lady Bird Johnson" profile face photo OR "Lady Bird Johnson" 3/4 face view OR "Lady Bird Johnson" headshot OR "Lady Bird Johnson" official photo
2025-05-24 14:24:56,770 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:22 - Preparing to download images. Target: 'Lady Bird Johnson', Query: '"Lady Bird Johnson" clear face photo OR "Lady Bird Johnson" profile face photo OR "Lady Bird Johnson" 3/4 face view OR "Lady Bird Johnson" headshot OR "Lady Bird Johnson" official photo', Num: 5, Reference: True
2025-05-24 14:24:56,771 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:50 -   Saving up to 5 images to: reference_faces/Lady_Bird_Johnson for query: '"Lady Bird Johnson" clear face photo OR "Lady Bird Johnson" profile face photo OR "Lady Bird Johnson" 3/4 face view OR "Lady Bird Johnson" headshot OR "Lady Bird Johnson" official photo'
2025-05-24 14:24:56,771 - VisualChainApp - DEBUG - image_downloader.fetch_images_for_link:62 - Starting icrawler.crawl for: "Lady Bird Johnson" clear face photo OR "Lady Bird Johnson" profile face photo OR "Lady Bird Johnson" 3/4 face view OR "Lady Bird Johnson" headshot OR "Lady Bird Johnson" official photo (max_num=5)
2025-05-24 14:24:59,784 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:70 -   Finished icrawler.crawl for 'reference for Lady Bird Johnson'.
2025-05-24 14:24:59,784 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:79 -   Found 5 image files in reference_faces/Lady_Bird_Johnson after crawl attempt.
2025-05-24 14:24:59,785 - VisualChainApp - INFO - image_verifier._download_additional_reference_images:154 - Download process potentially added images for Lady Bird Johnson. Folder: reference_faces/Lady_Bird_Johnson.
2025-05-24 14:25:02,787 - VisualChainApp - INFO - image_verifier.find_reference_image:190 - Found 5 total reference(s) for 'Lady Bird Johnson' after download attempt.
2025-05-24 14:25:02,788 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:224 -   DeepFace: Verifying P1 'Eleanor Roosevelt' using 5 reference image(s) across 3 model(s).
2025-05-24 14:25:02,788 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 1/3: 'ArcFace'
2025-05-24 14:25:02,789 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.68 for model 'ArcFace' with metric 'cosine'.
2025-05-24 14:25:02,789 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:25:05,748 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:268 -       P1 verification with ArcFace SUCCEEDED (Ref: '000001.jpg') (Dist: 0.6545, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:25:05,749 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'ArcFace': VERIFIED
2025-05-24 14:25:05,749 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 2/3: 'VGG-Face'
2025-05-24 14:25:05,749 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.45 for model 'VGG-Face' with metric 'cosine'.
2025-05-24 14:25:05,749 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:25:09,332 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.5836, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:25:09,332 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:25:12,139 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.6450, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:25:12,140 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 3/5): 000004.jpg vs 000003.jpg
2025-05-24 14:25:15,931 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.5034, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:25:15,931 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 4/5): 000004.jpg vs 000004.jpg
2025-05-24 14:25:18,992 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.8225, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:25:18,992 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 5/5): 000004.jpg vs 000005.jpg
2025-05-24 14:25:22,672 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.9310, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:25:22,672 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:25:22,672 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 3/3: 'Facenet'
2025-05-24 14:25:22,672 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.4 for model 'Facenet' with metric 'cosine'.
2025-05-24 14:25:22,672 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:25:25,835 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:268 -       P1 verification with Facenet SUCCEEDED (Ref: '000001.jpg') (Dist: 0.3772, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:25:25,836 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'Facenet': VERIFIED
2025-05-24 14:25:25,836 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:280 -   DeepFace P1 'Eleanor Roosevelt' Voting: 2/3 models voted YES. Final P1 Verified: True (Threshold: >50%)
2025-05-24 14:25:25,836 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:285 -   DeepFace: P1 'Eleanor Roosevelt' verified by vote. Verifying P2 'Lady Bird Johnson' using 5 reference image(s) across 3 model(s).
2025-05-24 14:25:25,836 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:287 -     P2 Model 1/3: 'ArcFace'
2025-05-24 14:25:25,836 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:25:29,037 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000001.jpg') (Dist: 0.9990, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:25:29,037 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:25:32,570 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000002.jpg') (Dist: 0.7538, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:25:32,571 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 3/5): 000004.jpg vs 000003.jpg
2025-05-24 14:25:36,523 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000003.jpg') (Dist: 0.6954, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:25:36,523 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 4/5): 000004.jpg vs 000004.jpg
2025-05-24 14:25:39,373 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000004.jpg') (Dist: 0.9669, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:25:39,374 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: ArcFace, Ref 5/5): 000004.jpg vs 000005.jpg
2025-05-24 14:25:42,596 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with ArcFace FAILED (Ref: '000005.jpg') (Dist: 0.8340, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:25:42,596 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:334 -     P2 Result for model 'ArcFace': NOT VERIFIED
2025-05-24 14:25:42,596 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:287 -     P2 Model 2/3: 'VGG-Face'
2025-05-24 14:25:42,596 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:25:46,180 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.9153, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:25:46,181 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:25:50,142 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.8825, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:25:50,142 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 3/5): 000004.jpg vs 000003.jpg
2025-05-24 14:25:54,393 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.8920, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:25:54,394 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 4/5): 000004.jpg vs 000004.jpg
2025-05-24 14:25:57,455 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.8396, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:25:57,455 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: VGG-Face, Ref 5/5): 000004.jpg vs 000005.jpg
2025-05-24 14:26:00,946 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.7846, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:26:00,946 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:334 -     P2 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:26:00,946 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:287 -     P2 Model 3/3: 'Facenet'
2025-05-24 14:26:00,946 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:26:04,280 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000001.jpg') (Dist: 1.0647, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:26:04,280 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:26:08,064 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000002.jpg') (Dist: 0.8750, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:26:08,064 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 3/5): 000004.jpg vs 000003.jpg
2025-05-24 14:26:12,283 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000003.jpg') (Dist: 0.8546, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:26:12,284 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 4/5): 000004.jpg vs 000004.jpg
2025-05-24 14:26:15,281 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000004.jpg') (Dist: 0.7981, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:26:15,282 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:304 -         P2 Check (Model: Facenet, Ref 5/5): 000004.jpg vs 000005.jpg
2025-05-24 14:26:18,779 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:329 -       P2 verification with Facenet FAILED (Ref: '000005.jpg') (Dist: 0.7818, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:26:18,780 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:334 -     P2 Result for model 'Facenet': NOT VERIFIED
2025-05-24 14:26:18,780 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:338 -   DeepFace P2 'Lady Bird Johnson' Voting: 0/3 models voted YES. Final P2 Verified: False (Threshold: >50%)
2025-05-24 14:26:18,780 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:346 -   DeepFace Multi-Model Verification: One or both not verified by vote. P1_verified: True, P2_verified: False
2025-05-24 14:26:18,780 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:206 -   Verifying image: 000005.jpg for 'Eleanor Roosevelt' and 'Lady Bird Johnson' using DeepFace (multiple models: ArcFace, VGG-Face, Facenet).
2025-05-24 14:26:18,780 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Eleanor Roosevelt (target count: 5)
2025-05-24 14:26:18,781 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Eleanor Roosevelt' in reference_faces/Eleanor_Roosevelt.
2025-05-24 14:26:18,781 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Eleanor Roosevelt'. Using top 5.
2025-05-24 14:26:18,781 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Lady Bird Johnson (target count: 5)
2025-05-24 14:26:18,781 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Lady Bird Johnson' in reference_faces/Lady_Bird_Johnson.
2025-05-24 14:26:18,781 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Lady Bird Johnson'. Using top 5.
2025-05-24 14:26:18,781 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:224 -   DeepFace: Verifying P1 'Eleanor Roosevelt' using 5 reference image(s) across 3 model(s).
2025-05-24 14:26:18,781 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 1/3: 'ArcFace'
2025-05-24 14:26:18,781 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.68 for model 'ArcFace' with metric 'cosine'.
2025-05-24 14:26:18,781 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 1/5): 000005.jpg vs 000001.jpg
2025-05-24 14:26:23,178 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000001.jpg') (Dist: 0.8408, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:26:23,178 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 2/5): 000005.jpg vs 000002.jpg
2025-05-24 14:26:27,054 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000002.jpg') (Dist: 0.7675, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:26:27,056 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 3/5): 000005.jpg vs 000003.jpg
2025-05-24 14:26:31,979 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000003.jpg') (Dist: 0.9324, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:26:31,980 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 4/5): 000005.jpg vs 000004.jpg
2025-05-24 14:26:36,129 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000004.jpg') (Dist: 0.9506, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:26:36,129 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 5/5): 000005.jpg vs 000005.jpg
2025-05-24 14:26:40,779 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000005.jpg') (Dist: 0.9543, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:26:40,780 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'ArcFace': NOT VERIFIED
2025-05-24 14:26:40,780 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 2/3: 'VGG-Face'
2025-05-24 14:26:40,780 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.45 for model 'VGG-Face' with metric 'cosine'.
2025-05-24 14:26:40,780 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 1/5): 000005.jpg vs 000001.jpg
2025-05-24 14:26:45,871 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.8838, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:26:45,871 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 2/5): 000005.jpg vs 000002.jpg
2025-05-24 14:26:50,442 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.8763, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:26:50,444 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 3/5): 000005.jpg vs 000003.jpg
2025-05-24 14:26:56,060 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.8003, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:26:56,061 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 4/5): 000005.jpg vs 000004.jpg
2025-05-24 14:27:00,801 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.8248, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:27:00,801 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 5/5): 000005.jpg vs 000005.jpg
2025-05-24 14:27:06,161 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.7677, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:27:06,162 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:27:06,162 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 3/3: 'Facenet'
2025-05-24 14:27:06,162 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.4 for model 'Facenet' with metric 'cosine'.
2025-05-24 14:27:06,162 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 1/5): 000005.jpg vs 000001.jpg
2025-05-24 14:27:10,582 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000001.jpg') (Dist: 0.8785, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:27:10,582 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 2/5): 000005.jpg vs 000002.jpg
2025-05-24 14:27:14,351 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000002.jpg') (Dist: 0.7394, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:27:14,351 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 3/5): 000005.jpg vs 000003.jpg
2025-05-24 14:27:19,090 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000003.jpg') (Dist: 0.7978, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:27:19,090 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 4/5): 000005.jpg vs 000004.jpg
2025-05-24 14:27:23,114 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000004.jpg') (Dist: 0.6660, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:27:23,115 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 5/5): 000005.jpg vs 000005.jpg
2025-05-24 14:27:27,557 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000005.jpg') (Dist: 0.5663, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:27:27,557 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'Facenet': NOT VERIFIED
2025-05-24 14:27:27,557 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:280 -   DeepFace P1 'Eleanor Roosevelt' Voting: 0/3 models voted YES. Final P1 Verified: False (Threshold: >50%)
2025-05-24 14:27:27,557 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:340 -   DeepFace: Skipping P2 'Lady Bird Johnson' check as P1 'Eleanor Roosevelt' was not verified by vote.
2025-05-24 14:27:27,557 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:346 -   DeepFace Multi-Model Verification: One or both not verified by vote. P1_verified: False, P2_verified: False
2025-05-24 14:27:27,558 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:206 -   Verifying image: 000001.jpg for 'Eleanor Roosevelt' and 'Lady Bird Johnson' using DeepFace (multiple models: ArcFace, VGG-Face, Facenet).
2025-05-24 14:27:27,558 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Eleanor Roosevelt (target count: 5)
2025-05-24 14:27:27,559 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Eleanor Roosevelt' in reference_faces/Eleanor_Roosevelt.
2025-05-24 14:27:27,559 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Eleanor Roosevelt'. Using top 5.
2025-05-24 14:27:27,559 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Lady Bird Johnson (target count: 5)
2025-05-24 14:27:27,559 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Lady Bird Johnson' in reference_faces/Lady_Bird_Johnson.
2025-05-24 14:27:27,559 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Lady Bird Johnson'. Using top 5.
2025-05-24 14:27:27,559 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:224 -   DeepFace: Verifying P1 'Eleanor Roosevelt' using 5 reference image(s) across 3 model(s).
2025-05-24 14:27:27,559 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 1/3: 'ArcFace'
2025-05-24 14:27:27,559 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.68 for model 'ArcFace' with metric 'cosine'.
2025-05-24 14:27:27,559 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 1/5): 000001.jpg vs 000001.jpg
2025-05-24 14:27:31,686 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000001.jpg') (Dist: 0.8109, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:27:31,687 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 2/5): 000001.jpg vs 000002.jpg
2025-05-24 14:27:35,250 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:268 -       P1 verification with ArcFace SUCCEEDED (Ref: '000002.jpg') (Dist: 0.6772, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:27:35,250 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'ArcFace': VERIFIED
2025-05-24 14:27:35,250 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 2/3: 'VGG-Face'
2025-05-24 14:27:35,250 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.45 for model 'VGG-Face' with metric 'cosine'.
2025-05-24 14:27:35,250 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 1/5): 000001.jpg vs 000001.jpg
2025-05-24 14:27:39,528 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.9021, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:27:39,528 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 2/5): 000001.jpg vs 000002.jpg
2025-05-24 14:27:43,212 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.8193, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:27:43,213 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 3/5): 000001.jpg vs 000003.jpg
2025-05-24 14:27:47,978 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.7920, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:27:47,978 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 4/5): 000001.jpg vs 000004.jpg
2025-05-24 14:27:52,103 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.9369, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:27:52,103 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 5/5): 000001.jpg vs 000005.jpg
2025-05-24 14:27:56,630 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.9050, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:27:56,630 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:27:56,630 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 3/3: 'Facenet'
2025-05-24 14:27:56,630 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.4 for model 'Facenet' with metric 'cosine'.
2025-05-24 14:27:56,630 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 1/5): 000001.jpg vs 000001.jpg
2025-05-24 14:28:00,732 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000001.jpg') (Dist: 0.6843, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:28:00,733 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 2/5): 000001.jpg vs 000002.jpg
2025-05-24 14:28:04,331 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000002.jpg') (Dist: 0.7402, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:28:04,331 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 3/5): 000001.jpg vs 000003.jpg
2025-05-24 14:28:08,993 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000003.jpg') (Dist: 0.7476, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:28:08,993 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 4/5): 000001.jpg vs 000004.jpg
2025-05-24 14:28:12,856 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000004.jpg') (Dist: 0.9119, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:28:12,857 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 5/5): 000001.jpg vs 000005.jpg
2025-05-24 14:28:17,085 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000005.jpg') (Dist: 1.0767, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:28:17,085 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'Facenet': NOT VERIFIED
2025-05-24 14:28:17,086 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:280 -   DeepFace P1 'Eleanor Roosevelt' Voting: 1/3 models voted YES. Final P1 Verified: False (Threshold: >50%)
2025-05-24 14:28:17,086 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:340 -   DeepFace: Skipping P2 'Lady Bird Johnson' check as P1 'Eleanor Roosevelt' was not verified by vote.
2025-05-24 14:28:17,086 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:346 -   DeepFace Multi-Model Verification: One or both not verified by vote. P1_verified: False, P2_verified: False
2025-05-24 14:28:17,086 - VisualChainApp - WARNING - image_verifier.verify_and_potentially_reprompt_link:402 -   Verification FAILED for all 3 checked images for 'Eleanor Roosevelt' and 'Lady Bird Johnson' using DeepFace Multi-Model.
2025-05-24 14:28:17,086 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:406 -   Reprompting Gemini for an alternative link (due to image verification failure with DeepFace Multi-Model).
2025-05-24 14:28:17,087 - VisualChainApp - INFO - image_verifier.query_gemini_text_for_retry:82 - Sending text prompt to Gemini for retry (from image_verifier)...
2025-05-24 14:28:17,087 - VisualChainApp - DEBUG - image_verifier.query_gemini_text_for_retry:84 - User part of prompt for Gemini text (verifier retry):
<retry_connection_request>
  <person1>Eleanor Roosevelt</person1>
  <person2>Lady Bird Johnson</person2>
  <failed_link_instruction>
    IMPORTANT: Your previous suggestion for a co-occurrence between Eleanor Roosevelt and Lady Bird Johnson (event: "Both were First Ladies of the United States, and participated in various White House events and social functions, often documented in photographs and newsreels of the era.", query: ""Eleanor Roosevelt" AND "Lady Bird Johnson" AND "White House events"
2025-05-24 14:28:34,996 - VisualChainApp - DEBUG - image_verifier.clean_gemini_xml_response_verifier:72 - Raw AI output before cleaning (verifier response) (first 300 chars): ```xml
<no_alternative_link_found reason="Despite extensive research across numerous historical databases, news archives, biographical accounts, and records of social and political events spanning the lives of Eleanor Roosevelt and Lady Bird Johnson, no verifiable documented co-occurrence beyond the
2025-05-24 14:28:34,998 - VisualChainApp - DEBUG - image_verifier.clean_gemini_xml_response_verifier:79 - AI output after cleaning (verifier resp) (first 300 chars): <no_alternative_link_found reason="Despite extensive research across numerous historical databases, news archives, biographical accounts, and records of social and political events spanning the lives of Eleanor Roosevelt and Lady Bird Johnson, no verifiable documented co-occurrence beyond their shar
2025-05-24 14:28:34,998 - VisualChainApp - DEBUG - image_verifier.query_gemini_text_for_retry:89 - Cleaned Gemini response from text query (verifier retry): <no_alternative_link_found reason="Despite extensive research across numerous historical databases, news archives, biographical accounts, and records of social and political events spanning the lives of Eleanor Roosevelt and Lady Bird Johnson, no verifiable documented co-occurrence beyond their shar
2025-05-24 14:28:34,998 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:412 -   Gemini indicated no alternative link found (reprompt after verification failure): Despite extensive research across numerous historical databases, news archives, biographical accounts, and records of social and political events spanning the lives of Eleanor Roosevelt and Lady Bird Johnson, no verifiable documented co-occurrence beyond their shared role as First Ladies (which lacked sufficient visual verification potential) could be identified.  The time periods of their respective tenures as First Lady had minimal overlap, and there is no readily available evidence to support any known joint appearances, meetings, or documented interactions outside of general White House functions, which were deemed unsuitable due to the lack of specific, individually identifiable events that could plausibly yield visual evidence.  Further, exploring intermediary figures (e.g., shared acquaintances, political associates during overlapping periods) yielded no conclusive results in terms of documented co-occurrences for which visual verification was plausible.  The search included exploration of individuals known to have interacted with both women, such as other First Ladies, prominent political figures of the time, and influential figures in social circles of the period.  However, no documentation of co-occurrences (meetings or events) that provided a reasonable probability of photographic or video evidence was discovered.  Therefore, after an exhaustive search, including attempts at link fortification via the introduction of intermediary figures, no alternative verifiable link can be provided that meets the specified criteria.
2025-05-24 14:28:34,999 - VisualChainApp - WARNING - main_orchestrator.main:325 -   Segment 'Eleanor Roosevelt' → 'Lady Bird Johnson' failed verification (status from verifier: FAILED_VERIFICATION_NO_ALTERNATIVE).
2025-05-24 14:28:35,000 - VisualChainApp - INFO - main_orchestrator.main:344 -   Attempting orchestrator-level sub-chain re-generation from 'Eleanor Roosevelt' to 'James Charles'.
2025-05-24 14:28:35,000 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:112 - Attempting to extract persons from subjects_text: 'Winston Churchill → Franklin D. Roosevelt'
2025-05-24 14:28:35,000 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:128 - Extracted P1: 'Winston Churchill', P2: 'Franklin D. Roosevelt'
2025-05-24 14:28:35,000 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:112 - Attempting to extract persons from subjects_text: 'Franklin D. Roosevelt → Eleanor Roosevelt'
2025-05-24 14:28:35,000 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:128 - Extracted P1: 'Franklin D. Roosevelt', P2: 'Eleanor Roosevelt'
2025-05-24 14:28:35,000 - VisualChainApp - INFO - main_orchestrator.main:354 -     Orchestrator sub-chain attempt 1/3 from 'Eleanor Roosevelt' to 'James Charles'
2025-05-24 14:28:35,001 - VisualChainApp - DEBUG - main_orchestrator.main:385 -     Sub-chain exclusion instruction: IMPORTANT: You are building a new sub-chain from 'Eleanor Roosevelt' to 'James Charles'.
1. Crucially, DO NOT suggest 'Lady Bird Johnson' as the immediate next connection from 'Eleanor Roosevelt'. That path just failed.
2. If possible, also try to AVOID using any of these people as *new intermediaries* in this sub-chain, as they are already part of the path leading to 'Eleanor Roosevelt': ['Winston Churchill', 'Franklin D. Roosevelt']. Focus on new, previously unused intermediaries.

3. The goal is to find a NEW, fresh path from 'Eleanor Roosevelt' to 'James Charles'.
2025-05-24 14:28:35,001 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain:110 - Requesting chain: Eleanor Roosevelt -> ... -> James Charles.
2025-05-24 14:28:35,001 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain:112 - With exclusion instruction: IMPORTANT: You are building a new sub-chain from 'Eleanor Roosevelt' to 'James Charles'.
1. Crucially, DO NOT suggest 'Lady Bird Johnson' as the immediate next connection from 'Eleanor Roosevelt'. That path just failed.
2. If possible, also try to AVOID using any of these people as *new intermediaries* in this sub-chain, as they are already part of the path leading to 'Eleanor Roosevelt': ['Winston Churchill', 'Franklin D. Roosevelt']. Focus on new, previously unused intermediaries.

3. The goal is to find a NEW, fresh path from 'Eleanor Roosevelt' to 'James Charles'.
2025-05-24 14:28:35,002 - VisualChainApp - INFO - initial_gemini_query._load_gemini_task_header:13 - Gemini task header loaded from prompts/gemini_task_header.txt
2025-05-24 14:28:35,002 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:50 - Querying Gemini with pre-formatted user input for a chain.
2025-05-24 14:28:35,025 - VisualChainApp - DEBUG - initial_gemini_query.get_initial_chain_from_gemini_direct:73 - User input XML for Gemini (part of full prompt):
## Task Execution
Now, using the rules, input format, and output formats defined above, please process the following connection request to find a full chain:<connection_request>
  <person1>Eleanor Roosevelt</person1>
  <person2>James Charles</person2>
  <additional_instructions>IMPORTANT: You are bu
... (user input snippet) ...
'Franklin D. Roosevelt']. Focus on new, previously unused intermediaries.

3. The goal is to find a NEW, fresh path from 'Eleanor Roosevelt' to 'James Charles'.</additional_instructions> 
  <!-- This will be empty for the first call, or contain exclusion for sub-chain calls -->
</connection_request>
2025-05-24 14:28:35,025 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:74 - --- Sending to Gemini (initial_gemini_query.get_initial_chain_from_gemini_direct) ---
2025-05-24 14:28:41,549 - VisualChainApp - DEBUG - initial_gemini_query.clean_gemini_xml_response:26 - Raw AI output before cleaning (first 300 chars): ```xml
<connection_chain>
  <chain_summary>
    <total_links>3</total_links>
    <subjects_connected>Eleanor Roosevelt → Oprah Winfrey → Michelle Obama → James Charles</subjects_connected>
    <chain_type>Extended</chain_type>
    <intermediary_count>2</intermediary_count>
    <research_confidence>M
2025-05-24 14:28:41,551 - VisualChainApp - DEBUG - initial_gemini_query.clean_gemini_xml_response:46 - AI output after cleaning (first 300 chars): <connection_chain>
  <chain_summary>
    <total_links>3</total_links>
    <subjects_connected>Eleanor Roosevelt → Oprah Winfrey → Michelle Obama → James Charles</subjects_connected>
    <chain_type>Extended</chain_type>
    <intermediary_count>2</intermediary_count>
    <research_confidence>Medium</
2025-05-24 14:28:41,551 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:92 - Gemini response parsed as XML (root tag: connection_chain).
2025-05-24 14:28:41,551 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:98 - Received response from Gemini.
2025-05-24 14:28:41,553 - VisualChainApp - INFO - main_orchestrator.main:396 -     Sub-chain attempt output saved to output/temp_files/sub_chain_attempt_Eleanor_Roosevelt_to_James_Charles_1.xml
2025-05-24 14:28:41,553 - VisualChainApp - INFO - main_orchestrator.main:410 -     Successfully got new sub-chain from 'Eleanor Roosevelt' with 3 link(s). Replacing rest of old chain.
2025-05-24 14:28:41,554 - VisualChainApp - INFO - main_orchestrator.main:256 - --- Processing Link 3/5 (Overall) ---
2025-05-24 14:28:41,554 - VisualChainApp - DEBUG - main_orchestrator.main:257 - Current link to process XML: <link id="1">
    <subjects>Eleanor Roosevelt → Oprah Winfrey</subjects>
    <evidence>Both Eleanor Roosevelt and Oprah Winfrey have been subjects of extensive biographical works and documentaries, many of which reference their shared interest in social justice and women's rights. While a direct doc
2025-05-24 14:28:41,554 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:112 - Attempting to extract persons from subjects_text: 'Eleanor Roosevelt → Oprah Winfrey'
2025-05-24 14:28:41,554 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:128 - Extracted P1: 'Eleanor Roosevelt', P2: 'Oprah Winfrey'
2025-05-24 14:28:41,554 - VisualChainApp - INFO - main_orchestrator.main:269 -   Attempting segment: 'Eleanor Roosevelt' → 'Oprah Winfrey'
2025-05-24 14:28:41,555 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:22 - Preparing to download images. Target: 'Eleanor Roosevelt → Oprah Winfrey', Query: '"Eleanor Roosevelt" AND "Oprah Winfrey" AND "social justice"', Num: 5, Reference: False
2025-05-24 14:28:41,555 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:48 - Image download folder exists: output/connection_chain_images/Eleanor_Roosevelt_Oprah_Winfrey
2025-05-24 14:28:41,555 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:50 -   Saving up to 5 images to: output/connection_chain_images/Eleanor_Roosevelt_Oprah_Winfrey for query: '"Eleanor Roosevelt" AND "Oprah Winfrey" AND "social justice"'
2025-05-24 14:28:41,558 - VisualChainApp - DEBUG - image_downloader.fetch_images_for_link:62 - Starting icrawler.crawl for: "Eleanor Roosevelt" AND "Oprah Winfrey" AND "social justice" (max_num=5)
2025-05-24 14:28:48,585 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:70 -   Finished icrawler.crawl for 'Eleanor Roosevelt → Oprah Winfrey'.
2025-05-24 14:28:48,585 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:79 -   Found 5 image files in output/connection_chain_images/Eleanor_Roosevelt_Oprah_Winfrey after crawl attempt.
2025-05-24 14:28:48,587 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:363 - --- Verifying link segment: 'Eleanor Roosevelt' <-> 'Oprah Winfrey' (using DeepFace Multi-Model) ---
2025-05-24 14:28:48,588 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:386 -   Found 5 images in 'output/connection_chain_images/Eleanor_Roosevelt_Oprah_Winfrey'. Will check up to 3 with DeepFace Multi-Model.
2025-05-24 14:28:48,588 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:206 -   Verifying image: 000004.jpg for 'Eleanor Roosevelt' and 'Oprah Winfrey' using DeepFace (multiple models: ArcFace, VGG-Face, Facenet).
2025-05-24 14:28:48,588 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Eleanor Roosevelt (target count: 5)
2025-05-24 14:28:48,588 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Eleanor Roosevelt' in reference_faces/Eleanor_Roosevelt.
2025-05-24 14:28:48,589 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Eleanor Roosevelt'. Using top 5.
2025-05-24 14:28:48,589 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Oprah Winfrey (target count: 5)
2025-05-24 14:28:48,589 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Oprah Winfrey' in reference_faces/Oprah_Winfrey.
2025-05-24 14:28:48,589 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Oprah Winfrey'. Using top 5.
2025-05-24 14:28:48,589 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:224 -   DeepFace: Verifying P1 'Eleanor Roosevelt' using 5 reference image(s) across 3 model(s).
2025-05-24 14:28:48,589 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 1/3: 'ArcFace'
2025-05-24 14:28:48,589 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.68 for model 'ArcFace' with metric 'cosine'.
2025-05-24 14:28:48,589 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:28:51,827 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000001.jpg') (Dist: 0.8733, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:28:51,828 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:28:54,538 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000002.jpg') (Dist: 0.8340, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:28:54,538 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 3/5): 000004.jpg vs 000003.jpg
2025-05-24 14:28:58,223 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000003.jpg') (Dist: 0.8957, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:28:58,224 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 4/5): 000004.jpg vs 000004.jpg
2025-05-24 14:29:01,258 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000004.jpg') (Dist: 0.8555, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:29:01,259 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 5/5): 000004.jpg vs 000005.jpg
2025-05-24 14:29:05,075 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000005.jpg') (Dist: 0.9978, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:29:05,076 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'ArcFace': NOT VERIFIED
2025-05-24 14:29:05,076 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 2/3: 'VGG-Face'
2025-05-24 14:29:05,076 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.45 for model 'VGG-Face' with metric 'cosine'.
2025-05-24 14:29:05,076 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:29:08,750 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.8742, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:29:08,751 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:29:11,874 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.7758, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:29:11,874 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 3/5): 000004.jpg vs 000003.jpg
2025-05-24 14:29:16,015 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.8643, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:29:16,015 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 4/5): 000004.jpg vs 000004.jpg
2025-05-24 14:29:19,326 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.8727, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:29:19,326 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 5/5): 000004.jpg vs 000005.jpg
2025-05-24 14:29:23,352 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.9142, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:29:23,354 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:29:23,354 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 3/3: 'Facenet'
2025-05-24 14:29:23,354 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.4 for model 'Facenet' with metric 'cosine'.
2025-05-24 14:29:23,354 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 1/5): 000004.jpg vs 000001.jpg
2025-05-24 14:29:26,866 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000001.jpg') (Dist: 0.9942, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:29:26,867 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 2/5): 000004.jpg vs 000002.jpg
2025-05-24 14:29:29,868 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000002.jpg') (Dist: 0.9805, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:29:29,868 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 3/5): 000004.jpg vs 000003.jpg
2025-05-24 14:29:33,903 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000003.jpg') (Dist: 0.9159, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:29:33,903 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 4/5): 000004.jpg vs 000004.jpg
2025-05-24 14:29:37,144 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000004.jpg') (Dist: 0.8236, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:29:37,144 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 5/5): 000004.jpg vs 000005.jpg
2025-05-24 14:29:40,910 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000005.jpg') (Dist: 0.9363, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:29:40,911 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'Facenet': NOT VERIFIED
2025-05-24 14:29:40,911 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:280 -   DeepFace P1 'Eleanor Roosevelt' Voting: 0/3 models voted YES. Final P1 Verified: False (Threshold: >50%)
2025-05-24 14:29:40,911 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:340 -   DeepFace: Skipping P2 'Oprah Winfrey' check as P1 'Eleanor Roosevelt' was not verified by vote.
2025-05-24 14:29:40,911 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:346 -   DeepFace Multi-Model Verification: One or both not verified by vote. P1_verified: False, P2_verified: False
2025-05-24 14:29:40,911 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:206 -   Verifying image: 000005.jpg for 'Eleanor Roosevelt' and 'Oprah Winfrey' using DeepFace (multiple models: ArcFace, VGG-Face, Facenet).
2025-05-24 14:29:40,911 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Eleanor Roosevelt (target count: 5)
2025-05-24 14:29:40,912 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Eleanor Roosevelt' in reference_faces/Eleanor_Roosevelt.
2025-05-24 14:29:40,912 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Eleanor Roosevelt'. Using top 5.
2025-05-24 14:29:40,912 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Oprah Winfrey (target count: 5)
2025-05-24 14:29:40,912 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Oprah Winfrey' in reference_faces/Oprah_Winfrey.
2025-05-24 14:29:40,912 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Oprah Winfrey'. Using top 5.
2025-05-24 14:29:40,912 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:224 -   DeepFace: Verifying P1 'Eleanor Roosevelt' using 5 reference image(s) across 3 model(s).
2025-05-24 14:29:40,912 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 1/3: 'ArcFace'
2025-05-24 14:29:40,912 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.68 for model 'ArcFace' with metric 'cosine'.
2025-05-24 14:29:40,912 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 1/5): 000005.jpg vs 000001.jpg
2025-05-24 14:29:44,392 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000001.jpg') (Dist: 0.7272, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:29:44,392 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 2/5): 000005.jpg vs 000002.jpg
2025-05-24 14:29:47,325 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000002.jpg') (Dist: 0.7456, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:29:47,327 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 3/5): 000005.jpg vs 000003.jpg
2025-05-24 14:29:51,274 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000003.jpg') (Dist: 0.7002, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:29:51,274 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 4/5): 000005.jpg vs 000004.jpg
2025-05-24 14:29:54,493 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000004.jpg') (Dist: 0.7477, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:29:54,494 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 5/5): 000005.jpg vs 000005.jpg
2025-05-24 14:29:58,113 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000005.jpg') (Dist: 0.8230, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:29:58,113 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'ArcFace': NOT VERIFIED
2025-05-24 14:29:58,113 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 2/3: 'VGG-Face'
2025-05-24 14:29:58,113 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.45 for model 'VGG-Face' with metric 'cosine'.
2025-05-24 14:29:58,113 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 1/5): 000005.jpg vs 000001.jpg
2025-05-24 14:30:01,899 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.7271, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:30:01,900 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 2/5): 000005.jpg vs 000002.jpg
2025-05-24 14:30:05,004 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.7527, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:30:05,005 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 3/5): 000005.jpg vs 000003.jpg
2025-05-24 14:30:09,525 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.6653, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:30:09,526 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 4/5): 000005.jpg vs 000004.jpg
2025-05-24 14:30:12,902 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.8687, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:30:12,902 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 5/5): 000005.jpg vs 000005.jpg
2025-05-24 14:30:16,778 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.9079, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:30:16,778 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:30:16,778 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 3/3: 'Facenet'
2025-05-24 14:30:16,778 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.4 for model 'Facenet' with metric 'cosine'.
2025-05-24 14:30:16,778 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 1/5): 000005.jpg vs 000001.jpg
2025-05-24 14:30:20,277 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000001.jpg') (Dist: 0.4921, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:30:20,279 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 2/5): 000005.jpg vs 000002.jpg
2025-05-24 14:30:23,384 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000002.jpg') (Dist: 0.4373, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:30:23,384 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 3/5): 000005.jpg vs 000003.jpg
2025-05-24 14:30:27,456 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000003.jpg') (Dist: 0.4958, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:30:27,456 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 4/5): 000005.jpg vs 000004.jpg
2025-05-24 14:30:30,680 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000004.jpg') (Dist: 0.7647, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:30:30,680 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 5/5): 000005.jpg vs 000005.jpg
2025-05-24 14:30:34,493 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000005.jpg') (Dist: 1.0312, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:30:34,493 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'Facenet': NOT VERIFIED
2025-05-24 14:30:34,493 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:280 -   DeepFace P1 'Eleanor Roosevelt' Voting: 0/3 models voted YES. Final P1 Verified: False (Threshold: >50%)
2025-05-24 14:30:34,493 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:340 -   DeepFace: Skipping P2 'Oprah Winfrey' check as P1 'Eleanor Roosevelt' was not verified by vote.
2025-05-24 14:30:34,493 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:346 -   DeepFace Multi-Model Verification: One or both not verified by vote. P1_verified: False, P2_verified: False
2025-05-24 14:30:34,493 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:206 -   Verifying image: 000001.png for 'Eleanor Roosevelt' and 'Oprah Winfrey' using DeepFace (multiple models: ArcFace, VGG-Face, Facenet).
2025-05-24 14:30:34,494 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Eleanor Roosevelt (target count: 5)
2025-05-24 14:30:34,494 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Eleanor Roosevelt' in reference_faces/Eleanor_Roosevelt.
2025-05-24 14:30:34,494 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Eleanor Roosevelt'. Using top 5.
2025-05-24 14:30:34,494 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Oprah Winfrey (target count: 5)
2025-05-24 14:30:34,495 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Oprah Winfrey' in reference_faces/Oprah_Winfrey.
2025-05-24 14:30:34,495 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Oprah Winfrey'. Using top 5.
2025-05-24 14:30:34,495 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:224 -   DeepFace: Verifying P1 'Eleanor Roosevelt' using 5 reference image(s) across 3 model(s).
2025-05-24 14:30:34,495 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 1/3: 'ArcFace'
2025-05-24 14:30:34,495 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.68 for model 'ArcFace' with metric 'cosine'.
2025-05-24 14:30:34,495 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 1/5): 000001.png vs 000001.jpg
2025-05-24 14:30:38,593 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000001.jpg') (Dist: 0.7862, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:30:38,594 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 2/5): 000001.png vs 000002.jpg
2025-05-24 14:30:42,095 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000002.jpg') (Dist: 0.8542, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:30:42,095 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 3/5): 000001.png vs 000003.jpg
2025-05-24 14:30:46,561 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000003.jpg') (Dist: 0.8396, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:30:46,562 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 4/5): 000001.png vs 000004.jpg
2025-05-24 14:30:50,233 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000004.jpg') (Dist: 0.8466, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:30:50,235 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 5/5): 000001.png vs 000005.jpg
2025-05-24 14:30:54,496 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000005.jpg') (Dist: 0.9853, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:30:54,497 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'ArcFace': NOT VERIFIED
2025-05-24 14:30:54,497 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 2/3: 'VGG-Face'
2025-05-24 14:30:54,497 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.45 for model 'VGG-Face' with metric 'cosine'.
2025-05-24 14:30:54,497 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 1/5): 000001.png vs 000001.jpg
2025-05-24 14:30:58,770 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.8227, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:30:58,770 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 2/5): 000001.png vs 000002.jpg
2025-05-24 14:31:02,500 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.8588, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:31:02,501 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 3/5): 000001.png vs 000003.jpg
2025-05-24 14:31:07,172 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.7115, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:31:07,172 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 4/5): 000001.png vs 000004.jpg
2025-05-24 14:31:11,156 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.8739, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:31:11,157 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 5/5): 000001.png vs 000005.jpg
2025-05-24 14:31:15,507 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.9527, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:31:15,507 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:31:15,507 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 3/3: 'Facenet'
2025-05-24 14:31:15,508 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.4 for model 'Facenet' with metric 'cosine'.
2025-05-24 14:31:15,508 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 1/5): 000001.png vs 000001.jpg
2025-05-24 14:31:19,507 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000001.jpg') (Dist: 0.8600, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:31:19,507 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 2/5): 000001.png vs 000002.jpg
2025-05-24 14:31:23,201 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000002.jpg') (Dist: 0.6998, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:31:23,202 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 3/5): 000001.png vs 000003.jpg
2025-05-24 14:31:28,004 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000003.jpg') (Dist: 0.9301, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:31:28,005 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 4/5): 000001.png vs 000004.jpg
2025-05-24 14:31:31,855 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000004.jpg') (Dist: 0.8568, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:31:31,855 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 5/5): 000001.png vs 000005.jpg
2025-05-24 14:31:36,115 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000005.jpg') (Dist: 1.1245, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:31:36,115 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'Facenet': NOT VERIFIED
2025-05-24 14:31:36,115 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:280 -   DeepFace P1 'Eleanor Roosevelt' Voting: 0/3 models voted YES. Final P1 Verified: False (Threshold: >50%)
2025-05-24 14:31:36,116 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:340 -   DeepFace: Skipping P2 'Oprah Winfrey' check as P1 'Eleanor Roosevelt' was not verified by vote.
2025-05-24 14:31:36,116 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:346 -   DeepFace Multi-Model Verification: One or both not verified by vote. P1_verified: False, P2_verified: False
2025-05-24 14:31:36,116 - VisualChainApp - WARNING - image_verifier.verify_and_potentially_reprompt_link:402 -   Verification FAILED for all 3 checked images for 'Eleanor Roosevelt' and 'Oprah Winfrey' using DeepFace Multi-Model.
2025-05-24 14:31:36,116 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:406 -   Reprompting Gemini for an alternative link (due to image verification failure with DeepFace Multi-Model).
2025-05-24 14:31:36,116 - VisualChainApp - INFO - image_verifier.query_gemini_text_for_retry:82 - Sending text prompt to Gemini for retry (from image_verifier)...
2025-05-24 14:31:36,116 - VisualChainApp - DEBUG - image_verifier.query_gemini_text_for_retry:84 - User part of prompt for Gemini text (verifier retry):
<retry_connection_request>
  <person1>Eleanor Roosevelt</person1>
  <person2>Oprah Winfrey</person2>
  <failed_link_instruction>
    IMPORTANT: Your previous suggestion for a co-occurrence between Eleanor Roosevelt and Oprah Winfrey (event: "Both Eleanor Roosevelt and Oprah Winfrey have been subjects of extensive biographical works and documentaries, many of which reference their shared interest in social justice and women's rights. While a direct documented meeting isn't readily available from 
2025-05-24 14:31:53,241 - VisualChainApp - DEBUG - image_verifier.clean_gemini_xml_response_verifier:72 - Raw AI output before cleaning (verifier response) (first 300 chars): ```xml
<no_alternative_link_found reason="After an extensive search through reputable biographical sources, archival materials, and historical records pertaining to both Eleanor Roosevelt and Oprah Winfrey, no verifiable documentation of a shared public event, meeting, or project could be located.  
2025-05-24 14:31:53,243 - VisualChainApp - DEBUG - image_verifier.clean_gemini_xml_response_verifier:79 - AI output after cleaning (verifier resp) (first 300 chars): <no_alternative_link_found reason="After an extensive search through reputable biographical sources, archival materials, and historical records pertaining to both Eleanor Roosevelt and Oprah Winfrey, no verifiable documentation of a shared public event, meeting, or project could be located.  While b
2025-05-24 14:31:53,244 - VisualChainApp - DEBUG - image_verifier.query_gemini_text_for_retry:89 - Cleaned Gemini response from text query (verifier retry): <no_alternative_link_found reason="After an extensive search through reputable biographical sources, archival materials, and historical records pertaining to both Eleanor Roosevelt and Oprah Winfrey, no verifiable documentation of a shared public event, meeting, or project could be located.  While b
2025-05-24 14:31:53,244 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:412 -   Gemini indicated no alternative link found (reprompt after verification failure): After an extensive search through reputable biographical sources, archival materials, and historical records pertaining to both Eleanor Roosevelt and Oprah Winfrey, no verifiable documentation of a shared public event, meeting, or project could be located.  While both individuals are known for their significant contributions to social justice and women's rights, there's no evidence suggesting a direct interaction or documented co-occurrence that would plausibly yield photographic or video evidence. The absence of readily available primary sources documenting such an event, coupled with the significant temporal gap between their lives and careers, makes establishing even an indirect connection through intermediaries extremely challenging and ultimately unsuccessful.  Further, attempts to identify plausible intermediaries (e.g., mutual associates, figures involved in similar philanthropic endeavors) failed to produce verifiable evidence of co-occurrence with both Eleanor Roosevelt and Oprah Winfrey at any public event or documented meeting.
2025-05-24 14:31:53,244 - VisualChainApp - WARNING - main_orchestrator.main:325 -   Segment 'Eleanor Roosevelt' → 'Oprah Winfrey' failed verification (status from verifier: FAILED_VERIFICATION_NO_ALTERNATIVE).
2025-05-24 14:31:53,244 - VisualChainApp - INFO - main_orchestrator.main:344 -   Attempting orchestrator-level sub-chain re-generation from 'Eleanor Roosevelt' to 'James Charles'.
2025-05-24 14:31:53,245 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:112 - Attempting to extract persons from subjects_text: 'Winston Churchill → Franklin D. Roosevelt'
2025-05-24 14:31:53,245 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:128 - Extracted P1: 'Winston Churchill', P2: 'Franklin D. Roosevelt'
2025-05-24 14:31:53,245 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:112 - Attempting to extract persons from subjects_text: 'Franklin D. Roosevelt → Eleanor Roosevelt'
2025-05-24 14:31:53,245 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:128 - Extracted P1: 'Franklin D. Roosevelt', P2: 'Eleanor Roosevelt'
2025-05-24 14:31:53,245 - VisualChainApp - INFO - main_orchestrator.main:354 -     Orchestrator sub-chain attempt 1/3 from 'Eleanor Roosevelt' to 'James Charles'
2025-05-24 14:31:53,245 - VisualChainApp - DEBUG - main_orchestrator.main:385 -     Sub-chain exclusion instruction: IMPORTANT: You are building a new sub-chain from 'Eleanor Roosevelt' to 'James Charles'.
1. Crucially, DO NOT suggest 'Oprah Winfrey' as the immediate next connection from 'Eleanor Roosevelt'. That path just failed.
2. If possible, also try to AVOID using any of these people as *new intermediaries* in this sub-chain, as they are already part of the path leading to 'Eleanor Roosevelt': ['Winston Churchill', 'Franklin D. Roosevelt']. Focus on new, previously unused intermediaries.

3. The goal is to find a NEW, fresh path from 'Eleanor Roosevelt' to 'James Charles'.
2025-05-24 14:31:53,245 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain:110 - Requesting chain: Eleanor Roosevelt -> ... -> James Charles.
2025-05-24 14:31:53,246 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain:112 - With exclusion instruction: IMPORTANT: You are building a new sub-chain from 'Eleanor Roosevelt' to 'James Charles'.
1. Crucially, DO NOT suggest 'Oprah Winfrey' as the immediate next connection from 'Eleanor Roosevelt'. That path just failed.
2. If possible, also try to AVOID using any of these people as *new intermediaries* in this sub-chain, as they are already part of the path leading to 'Eleanor Roosevelt': ['Winston Churchill', 'Franklin D. Roosevelt']. Focus on new, previously unused intermediaries.

3. The goal is to find a NEW, fresh path from 'Eleanor Roosevelt' to 'James Charles'.
2025-05-24 14:31:53,247 - VisualChainApp - INFO - initial_gemini_query._load_gemini_task_header:13 - Gemini task header loaded from prompts/gemini_task_header.txt
2025-05-24 14:31:53,247 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:50 - Querying Gemini with pre-formatted user input for a chain.
2025-05-24 14:31:53,251 - VisualChainApp - DEBUG - initial_gemini_query.get_initial_chain_from_gemini_direct:73 - User input XML for Gemini (part of full prompt):
## Task Execution
Now, using the rules, input format, and output formats defined above, please process the following connection request to find a full chain:<connection_request>
  <person1>Eleanor Roosevelt</person1>
  <person2>James Charles</person2>
  <additional_instructions>IMPORTANT: You are bu
... (user input snippet) ...
'Franklin D. Roosevelt']. Focus on new, previously unused intermediaries.

3. The goal is to find a NEW, fresh path from 'Eleanor Roosevelt' to 'James Charles'.</additional_instructions> 
  <!-- This will be empty for the first call, or contain exclusion for sub-chain calls -->
</connection_request>
2025-05-24 14:31:53,251 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:74 - --- Sending to Gemini (initial_gemini_query.get_initial_chain_from_gemini_direct) ---
2025-05-24 14:31:59,958 - VisualChainApp - DEBUG - initial_gemini_query.clean_gemini_xml_response:26 - Raw AI output before cleaning (first 300 chars): ```xml
<connection_chain>
  <chain_summary>
    <total_links>3</total_links>
    <subjects_connected>Eleanor Roosevelt →  Jackie Kennedy Onassis →  RuPaul → James Charles</subjects_connected>
    <chain_type>Extended</chain_type>
    <intermediary_count>2</intermediary_count>
    <research_confidenc
2025-05-24 14:31:59,959 - VisualChainApp - DEBUG - initial_gemini_query.clean_gemini_xml_response:46 - AI output after cleaning (first 300 chars): <connection_chain>
  <chain_summary>
    <total_links>3</total_links>
    <subjects_connected>Eleanor Roosevelt →  Jackie Kennedy Onassis →  RuPaul → James Charles</subjects_connected>
    <chain_type>Extended</chain_type>
    <intermediary_count>2</intermediary_count>
    <research_confidence>Mediu
2025-05-24 14:31:59,959 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:92 - Gemini response parsed as XML (root tag: connection_chain).
2025-05-24 14:31:59,959 - VisualChainApp - INFO - initial_gemini_query.get_initial_chain_from_gemini_direct:98 - Received response from Gemini.
2025-05-24 14:31:59,962 - VisualChainApp - INFO - main_orchestrator.main:396 -     Sub-chain attempt output saved to output/temp_files/sub_chain_attempt_Eleanor_Roosevelt_to_James_Charles_1.xml
2025-05-24 14:31:59,962 - VisualChainApp - INFO - main_orchestrator.main:410 -     Successfully got new sub-chain from 'Eleanor Roosevelt' with 3 link(s). Replacing rest of old chain.
2025-05-24 14:31:59,962 - VisualChainApp - INFO - main_orchestrator.main:256 - --- Processing Link 3/5 (Overall) ---
2025-05-24 14:31:59,962 - VisualChainApp - DEBUG - main_orchestrator.main:257 - Current link to process XML: <link id="1">
    <subjects>Eleanor Roosevelt → Jackie Kennedy Onassis</subjects>
    <evidence>Both were prominent figures in American society and attended numerous social and political events.  While a specific joint event is hard to pinpoint with Tier 1 evidence, their overlapping circles and sha
2025-05-24 14:31:59,962 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:112 - Attempting to extract persons from subjects_text: 'Eleanor Roosevelt → Jackie Kennedy Onassis'
2025-05-24 14:31:59,963 - VisualChainApp - DEBUG - main_orchestrator.extract_persons_from_subjects:128 - Extracted P1: 'Eleanor Roosevelt', P2: 'Jackie Kennedy Onassis'
2025-05-24 14:31:59,963 - VisualChainApp - INFO - main_orchestrator.main:269 -   Attempting segment: 'Eleanor Roosevelt' → 'Jackie Kennedy Onassis'
2025-05-24 14:31:59,963 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:22 - Preparing to download images. Target: 'Eleanor Roosevelt → Jackie Kennedy Onassis', Query: '"Eleanor Roosevelt" AND "Jackie Kennedy Onassis" AND "social event" AND "1950s"', Num: 5, Reference: False
2025-05-24 14:31:59,964 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:43 - Created image download folder: output/connection_chain_images/Eleanor_Roosevelt_Jackie_Kennedy_Onassis
2025-05-24 14:31:59,964 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:50 -   Saving up to 5 images to: output/connection_chain_images/Eleanor_Roosevelt_Jackie_Kennedy_Onassis for query: '"Eleanor Roosevelt" AND "Jackie Kennedy Onassis" AND "social event" AND "1950s"'
2025-05-24 14:31:59,966 - VisualChainApp - DEBUG - image_downloader.fetch_images_for_link:62 - Starting icrawler.crawl for: "Eleanor Roosevelt" AND "Jackie Kennedy Onassis" AND "social event" AND "1950s" (max_num=5)
2025-05-24 14:32:07,027 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:70 -   Finished icrawler.crawl for 'Eleanor Roosevelt → Jackie Kennedy Onassis'.
2025-05-24 14:32:07,028 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:79 -   Found 3 image files in output/connection_chain_images/Eleanor_Roosevelt_Jackie_Kennedy_Onassis after crawl attempt.
2025-05-24 14:32:07,031 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:363 - --- Verifying link segment: 'Eleanor Roosevelt' <-> 'Jackie Kennedy Onassis' (using DeepFace Multi-Model) ---
2025-05-24 14:32:07,032 - VisualChainApp - INFO - image_verifier.verify_and_potentially_reprompt_link:386 -   Found 3 images in 'output/connection_chain_images/Eleanor_Roosevelt_Jackie_Kennedy_Onassis'. Will check up to 3 with DeepFace Multi-Model.
2025-05-24 14:32:07,032 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:206 -   Verifying image: 000001.jpg for 'Eleanor Roosevelt' and 'Jackie Kennedy Onassis' using DeepFace (multiple models: ArcFace, VGG-Face, Facenet).
2025-05-24 14:32:07,032 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Eleanor Roosevelt (target count: 5)
2025-05-24 14:32:07,033 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Eleanor Roosevelt' in reference_faces/Eleanor_Roosevelt.
2025-05-24 14:32:07,033 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Eleanor Roosevelt'. Using top 5.
2025-05-24 14:32:07,033 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Jackie Kennedy Onassis (target count: 5)
2025-05-24 14:32:07,033 - VisualChainApp - INFO - image_verifier._ensure_reference_folder:111 - Created reference folder for Jackie Kennedy Onassis: reference_faces/Jackie_Kennedy_Onassis
2025-05-24 14:32:07,034 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 0 existing reference(s) for 'Jackie Kennedy Onassis' in reference_faces/Jackie_Kennedy_Onassis.
2025-05-24 14:32:07,034 - VisualChainApp - INFO - image_verifier.find_reference_image:179 - Need 5 more reference images for 'Jackie Kennedy Onassis'. Triggering download.
2025-05-24 14:32:07,034 - VisualChainApp - INFO - image_verifier._load_reference_query_patterns:61 - Loaded 5 reference image query patterns from prompts/reference_image_query_patterns.txt
2025-05-24 14:32:07,035 - VisualChainApp - INFO - image_verifier._download_additional_reference_images:137 - Attempting download of 5 additional reference image(s) for Jackie Kennedy Onassis into reference_faces/Jackie_Kennedy_Onassis.
2025-05-24 14:32:07,035 - VisualChainApp - INFO - image_verifier._download_additional_reference_images:142 - Using diversified reference query for Jackie Kennedy Onassis: "Jackie Kennedy Onassis" clear face photo OR "Jackie Kennedy Onassis" profile face photo OR "Jackie Kennedy Onassis" 3/4 face view OR "Jackie Kennedy Onassis" headshot OR "Jackie Kennedy Onassis" official photo
2025-05-24 14:32:07,035 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:22 - Preparing to download images. Target: 'Jackie Kennedy Onassis', Query: '"Jackie Kennedy Onassis" clear face photo OR "Jackie Kennedy Onassis" profile face photo OR "Jackie Kennedy Onassis" 3/4 face view OR "Jackie Kennedy Onassis" headshot OR "Jackie Kennedy Onassis" official photo', Num: 5, Reference: True
2025-05-24 14:32:07,035 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:50 -   Saving up to 5 images to: reference_faces/Jackie_Kennedy_Onassis for query: '"Jackie Kennedy Onassis" clear face photo OR "Jackie Kennedy Onassis" profile face photo OR "Jackie Kennedy Onassis" 3/4 face view OR "Jackie Kennedy Onassis" headshot OR "Jackie Kennedy Onassis" official photo'
2025-05-24 14:32:07,036 - VisualChainApp - DEBUG - image_downloader.fetch_images_for_link:62 - Starting icrawler.crawl for: "Jackie Kennedy Onassis" clear face photo OR "Jackie Kennedy Onassis" profile face photo OR "Jackie Kennedy Onassis" 3/4 face view OR "Jackie Kennedy Onassis" headshot OR "Jackie Kennedy Onassis" official photo (max_num=5)
2025-05-24 14:32:09,048 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:70 -   Finished icrawler.crawl for 'reference for Jackie Kennedy Onassis'.
2025-05-24 14:32:09,049 - VisualChainApp - INFO - image_downloader.fetch_images_for_link:79 -   Found 5 image files in reference_faces/Jackie_Kennedy_Onassis after crawl attempt.
2025-05-24 14:32:09,049 - VisualChainApp - INFO - image_verifier._download_additional_reference_images:154 - Download process potentially added images for Jackie Kennedy Onassis. Folder: reference_faces/Jackie_Kennedy_Onassis.
2025-05-24 14:32:12,053 - VisualChainApp - INFO - image_verifier.find_reference_image:190 - Found 5 total reference(s) for 'Jackie Kennedy Onassis' after download attempt.
2025-05-24 14:32:12,054 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:224 -   DeepFace: Verifying P1 'Eleanor Roosevelt' using 5 reference image(s) across 3 model(s).
2025-05-24 14:32:12,054 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 1/3: 'ArcFace'
2025-05-24 14:32:12,054 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.68 for model 'ArcFace' with metric 'cosine'.
2025-05-24 14:32:12,054 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 1/5): 000001.jpg vs 000001.jpg
2025-05-24 14:32:14,992 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000001.jpg') (Dist: 0.7904, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:32:14,992 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 2/5): 000001.jpg vs 000002.jpg
2025-05-24 14:32:17,505 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000002.jpg') (Dist: 0.8939, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:32:17,505 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 3/5): 000001.jpg vs 000003.jpg
2025-05-24 14:32:21,709 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000003.jpg') (Dist: 0.9520, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:32:21,710 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 4/5): 000001.jpg vs 000004.jpg
2025-05-24 14:32:24,612 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000004.jpg') (Dist: 0.9117, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:32:24,612 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 5/5): 000001.jpg vs 000005.jpg
2025-05-24 14:32:28,190 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000005.jpg') (Dist: 0.9350, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:32:28,190 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'ArcFace': NOT VERIFIED
2025-05-24 14:32:28,190 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 2/3: 'VGG-Face'
2025-05-24 14:32:28,190 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.45 for model 'VGG-Face' with metric 'cosine'.
2025-05-24 14:32:28,190 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 1/5): 000001.jpg vs 000001.jpg
2025-05-24 14:32:31,915 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.9033, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:32:31,916 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 2/5): 000001.jpg vs 000002.jpg
2025-05-24 14:32:34,854 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.9770, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:32:34,855 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 3/5): 000001.jpg vs 000003.jpg
2025-05-24 14:32:39,101 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000003.jpg') (Dist: 0.8710, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:32:39,101 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 4/5): 000001.jpg vs 000004.jpg
2025-05-24 14:32:42,667 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000004.jpg') (Dist: 0.8571, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:32:42,668 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 5/5): 000001.jpg vs 000005.jpg
2025-05-24 14:32:46,313 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000005.jpg') (Dist: 0.9421, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:32:46,313 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'VGG-Face': NOT VERIFIED
2025-05-24 14:32:46,313 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 3/3: 'Facenet'
2025-05-24 14:32:46,313 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.4 for model 'Facenet' with metric 'cosine'.
2025-05-24 14:32:46,313 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 1/5): 000001.jpg vs 000001.jpg
2025-05-24 14:32:49,609 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000001.jpg') (Dist: 1.0272, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:32:49,609 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 2/5): 000001.jpg vs 000002.jpg
2025-05-24 14:32:53,130 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000002.jpg') (Dist: 1.1323, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:32:53,130 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 3/5): 000001.jpg vs 000003.jpg
2025-05-24 14:32:57,586 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000003.jpg') (Dist: 0.9698, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:32:57,587 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 4/5): 000001.jpg vs 000004.jpg
2025-05-24 14:33:01,496 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000004.jpg') (Dist: 1.0666, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:33:01,497 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: Facenet, Ref 5/5): 000001.jpg vs 000005.jpg
2025-05-24 14:33:06,435 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with Facenet FAILED (Ref: '000005.jpg') (Dist: 0.8892, ModelThr: 0.4, CustomThr: 0.4, Decision: Custom)
2025-05-24 14:33:06,435 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'Facenet': NOT VERIFIED
2025-05-24 14:33:06,435 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:280 -   DeepFace P1 'Eleanor Roosevelt' Voting: 0/3 models voted YES. Final P1 Verified: False (Threshold: >50%)
2025-05-24 14:33:06,435 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:340 -   DeepFace: Skipping P2 'Jackie Kennedy Onassis' check as P1 'Eleanor Roosevelt' was not verified by vote.
2025-05-24 14:33:06,435 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:346 -   DeepFace Multi-Model Verification: One or both not verified by vote. P1_verified: False, P2_verified: False
2025-05-24 14:33:06,436 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:206 -   Verifying image: 000002.jpg for 'Eleanor Roosevelt' and 'Jackie Kennedy Onassis' using DeepFace (multiple models: ArcFace, VGG-Face, Facenet).
2025-05-24 14:33:06,436 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Eleanor Roosevelt (target count: 5)
2025-05-24 14:33:06,436 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Eleanor Roosevelt' in reference_faces/Eleanor_Roosevelt.
2025-05-24 14:33:06,436 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Eleanor Roosevelt'. Using top 5.
2025-05-24 14:33:06,436 - VisualChainApp - INFO - image_verifier.find_reference_image:163 - Finding reference images for: Jackie Kennedy Onassis (target count: 5)
2025-05-24 14:33:06,436 - VisualChainApp - DEBUG - image_verifier.find_reference_image:171 - Found 5 existing reference(s) for 'Jackie Kennedy Onassis' in reference_faces/Jackie_Kennedy_Onassis.
2025-05-24 14:33:06,436 - VisualChainApp - INFO - image_verifier.find_reference_image:174 - Sufficient reference images (5) already exist for 'Jackie Kennedy Onassis'. Using top 5.
2025-05-24 14:33:06,436 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:224 -   DeepFace: Verifying P1 'Eleanor Roosevelt' using 5 reference image(s) across 3 model(s).
2025-05-24 14:33:06,436 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 1/3: 'ArcFace'
2025-05-24 14:33:06,436 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.68 for model 'ArcFace' with metric 'cosine'.
2025-05-24 14:33:06,437 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 1/5): 000002.jpg vs 000001.jpg
2025-05-24 14:33:12,756 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000001.jpg') (Dist: 0.7999, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:33:12,758 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 2/5): 000002.jpg vs 000002.jpg
2025-05-24 14:33:17,725 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000002.jpg') (Dist: 0.7702, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:33:17,725 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 3/5): 000002.jpg vs 000003.jpg
2025-05-24 14:33:22,890 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000003.jpg') (Dist: 0.9202, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:33:22,890 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 4/5): 000002.jpg vs 000004.jpg
2025-05-24 14:33:27,097 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000004.jpg') (Dist: 0.9606, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:33:27,097 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: ArcFace, Ref 5/5): 000002.jpg vs 000005.jpg
2025-05-24 14:33:32,794 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with ArcFace FAILED (Ref: '000005.jpg') (Dist: 0.8789, ModelThr: 0.68, CustomThr: 0.68, Decision: Custom)
2025-05-24 14:33:32,794 - VisualChainApp - INFO - image_verifier.verify_image_with_deepface_models:276 -     P1 Result for model 'ArcFace': NOT VERIFIED
2025-05-24 14:33:32,794 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:226 -     P1 Model 2/3: 'VGG-Face'
2025-05-24 14:33:32,794 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:237 -       Using custom threshold 0.45 for model 'VGG-Face' with metric 'cosine'.
2025-05-24 14:33:32,794 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 1/5): 000002.jpg vs 000001.jpg
2025-05-24 14:33:38,050 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000001.jpg') (Dist: 0.8068, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:33:38,050 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 2/5): 000002.jpg vs 000002.jpg
2025-05-24 14:33:42,637 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:271 -       P1 verification with VGG-Face FAILED (Ref: '000002.jpg') (Dist: 0.7776, ModelThr: 0.68, CustomThr: 0.45, Decision: Custom)
2025-05-24 14:33:42,638 - VisualChainApp - DEBUG - image_verifier.verify_image_with_deepface_models:246 -         P1 Check (Model: VGG-Face, Ref 3/5): 000002.jpg vs 000003.jpg
